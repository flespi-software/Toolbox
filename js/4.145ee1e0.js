(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"076c":function(e,t,i){},1635:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("entities-toolbar",{attrs:{item:e.selectedItem}},[i("div",{staticClass:"flex",class:{"middle-modificator":!e.active},attrs:{slot:"selects"},slot:"selects"},[i("div",{staticStyle:{display:"inline-flex"},style:{maxWidth:e.needShowBackToChannel&&e.needShowBackToDevice?"calc(100% - 150px)":e.needShowBackToChannel||e.needShowBackToDevice?"calc(100% - 80px)":"100%"}},[i("q-select",{ref:"itemSelect",staticClass:"items__select",class:{"items__select--no-selected":!e.active},attrs:{value:e.active,options:e.filteredItems,filled:"",loading:e.isItemsInitStart&&!e.isItemsInit,label:e.active?"Channel":"SELECT CHANNEL",dark:"","hide-bottom-space":"",dense:"",color:"white",disable:!e.isNeedSelect||"string"===typeof e.isNeedSelect&&e.isNeedSelect.indexOf("channels")>-1,"hide-dropdown-icon":!e.isNeedSelect||"string"===typeof e.isNeedSelect&&e.isNeedSelect.indexOf("channels")>-1,"popup-content-class":"items__popup","popup-content-style":{height:48*(e.filteredItems.length>6?6:e.filteredItems.length)+48+"px"}},on:{filter:function(t,i){return e.filterItems("channels",t,i)}},scopedSlots:e._u([{key:"no-option",fn:function(){return[i("div",[i("q-input",{staticClass:"q-ma-xs",attrs:{outlined:"","hide-bottom-space":"",rounded:"",dense:"",color:"white",dark:"",placeholder:"Filter",autofocus:""},on:{input:function(t){return e.$refs.itemSelect.filter(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"prepend",name:"mdi-magnify",color:"white"},slot:"prepend"})],1),i("div",{staticClass:"text-center"},[e._v("No results")])],1)]},proxy:!0},{key:"selected-item",fn:function(t){return[e.selectedItem?i("q-item",e._g(e._b({staticClass:"q-pa-none",staticStyle:{"min-height":"20px","margin-top":"2px","max-width":"100%"}},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis overflow-hidden q-pa-none text-white",attrs:{header:""}},[e._v(e._s(e.selectedItem.name||"<noname>"))]),i("q-item-label",{staticClass:"q-pa-none q-mt-none text-white ellipsis",staticStyle:{"line-height":"0.75rem!important","margin-top":"1px"},attrs:{caption:""}},[i("small",[e._v(e._s(e.selectedItem.uri||"<no uri>"))])])],1),i("q-item-section",{staticClass:"text-white",attrs:{side:""}},[i("q-item-label",{staticClass:"q-pa-none q-mt-none text-right"},[i("small",[e._v("#"+e._s(e.selectedItem.id))])])],1)],1):e._e()]}},e.filteredItems.length?{key:"option",fn:function(t){return[i("q-item",e._g(e._b({staticClass:"q-pa-xs",attrs:{clickable:""},on:{click:function(i){e.active=t.opt.id}}},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis overflow-hidden q-pa-xs",attrs:{header:""}},[e._v(e._s(t.opt.name||"<noname>"))]),i("q-item-label",{staticClass:"q-pa-none q-mt-none",staticStyle:{"line-height":"0.75rem!important","margin-top":"1px"},attrs:{caption:""}},[i("small",[e._v(e._s(t.opt.uri||"<no uri>"))])])],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",{staticClass:"q-pa-none q-mt-none text-right",class:{"q-pr-xs":e.$q.platform.is.mobile}},[i("small",[e._v("#"+e._s(t.opt.id))])])],1)],1)]}}:null],null,!0)},[i("div",{staticClass:"bg-dark q-pa-xs select__filter",attrs:{slot:"before-options"},slot:"before-options"},[i("q-input",{attrs:{outlined:"","hide-bottom-space":"",rounded:"",dense:"",color:"white",dark:"",placeholder:"Filter",autofocus:""},on:{input:function(t){return e.$refs.itemSelect.filter(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"prepend",name:"mdi-magnify",color:"white"},slot:"prepend"})],1)],1)])],1),i("transition-group",{attrs:{appear:"","enter-active-class":"animated bounceInDown","leave-active-class":"animated bounceOutUp"}},[e.needShowBackToChannel?i("q-btn",{key:"channel",staticClass:"on-right pull-right text-center rounded-borders q-px-xs q-py-none text-white",staticStyle:{width:"60px"},attrs:{title:"View channels",flat:"",dense:""},on:{click:e.viewLogsHandler}},[i("q-icon",{attrs:{size:"1.5rem",color:"white",name:"merge_type"}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v("Channel")])],1):e._e(),e.needShowBackToDevice?i("q-btn",{key:"device",staticClass:"on-right pull-right text-center rounded-borders q-px-xs q-py-none text-white",staticStyle:{width:"60px"},attrs:{title:"View devices",flat:"",dense:""},on:{click:e.goToDevice}},[i("q-icon",{attrs:{size:"1.5rem",color:"white",name:"mdi-developer-board"}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v("Device")])],1):e._e()],1)],1)]),e.active?i("traffic-viewer",{staticClass:"flex",attrs:{active:e.active,"active-device":e.activeDevice,isVisibleToolbar:e.isVisibleToolbar,"device-closeble":e.needShowBackToChannel,config:e.config},on:{"change-active-device":e.changeActiveDeviceHandler}}):e._e(),!e.items.length&&e.isItemsInit?i("div",{staticClass:"text-center text-grey-3 q-mt-lg",staticStyle:{"font-size":"2rem"}},[e._v(e._s(e.isLoading?"Fetching data..":"Compatible channels not found"))]):e._e()],1)},a=[],n=i("ded3"),o=i.n(n),l=(i("4e82"),i("13d5"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.activeDevice?i("messages",{directives:[{name:"show",rawName:"v-show",value:e.$q.platform.is.desktop||e.$q.platform.is.mobile&&!e.selectedMessages,expression:"$q.platform.is.desktop || ($q.platform.is.mobile && !selectedMessages)"}],ref:"messages",style:{height:"calc(100vh - "+(e.isVisibleToolbar?"100px":"50px")+")",position:"relative",width:e.$q.platform.is.desktop?"25%":"100%",minWidth:"250px"},attrs:{activeId:e.active,limit:e.limit,config:e.config.messages,"device-closeble":e.deviceCloseble,device:e.activeDevice,view:e.typeOfHexView},on:{"view-data":function(t){e.selectedMessages=t},close:function(){e.$emit("change-active-device",null),e.selectedMessages=""}}}):i("devices",{directives:[{name:"show",rawName:"v-show",value:e.$q.platform.is.desktop||e.$q.platform.is.mobile&&!e.selectedMessages,expression:"$q.platform.is.desktop || ($q.platform.is.mobile && !selectedMessages)"}],ref:"devices",style:{height:"calc(100vh - "+(e.isVisibleToolbar?"100px":"50px")+")",position:"relative",width:e.$q.platform.is.desktop?"25%":"100%",minWidth:"250px"},attrs:{activeId:e.active,config:e.config.messages,device:e.activeDevice,view:e.typeOfHexView},on:{"view-data":function(t){e.selectedMessages=t},"change:device":function(t){e.$emit("change-active-device",t)},close:function(){e.$emit("change-active-device",null),e.selectedMessages=""},"device:preview":e.previewShow,"device:preview-hide":e.previewHide}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.$q.platform.is.desktop||e.$q.platform.is.mobile&&e.selectedMessages,expression:"$q.platform.is.desktop || ($q.platform.is.mobile && selectedMessages)"}],style:{width:e.$q.platform.is.desktop?"75%":"100%",maxWidth:e.$q.platform.is.desktop?"calc(100% - 250px)":""}},[e.activeDevice?i("q-toolbar",{staticClass:"bg-grey-9"},[e.$q.platform.is.mobile?i("q-icon",{staticClass:"cursor-pointer",attrs:{color:"white",size:"1.5rem",name:"mdi-close"},nativeOn:{click:function(t){return function(){e.selectedMessages=""}.apply(null,arguments)}}}):e._e(),i("q-toolbar-title",[i("div",{staticClass:"text-white"},[e._v(e._s(e.activeDevice.ident))])]),i("q-btn",{attrs:{color:"white",flat:"",dense:"",label:"hex"===e.typeOfHexView?"text":"hex","icon-right":"hex"===e.typeOfHexView?"mdi-format-text":"mdi-matrix"},on:{click:function(t){e.typeOfHexView="hex"===e.typeOfHexView?"text":"hex"}}},[i("q-tooltip",[e._v("Change view mode to "+e._s("hex"===e.typeOfHexView?"text":"hex"))])],1),e.activeDevice?i("q-btn",{attrs:{color:"white",flat:"",dense:"",icon:"mdi-export-variant"}},[i("q-tooltip",[e._v("Export")]),i("q-menu",[i("q-list",{staticClass:"bg-grey-8 text-white",staticStyle:{"min-width":"150px"}},[i("div",{staticClass:"q-pa-sm"},[i("div",{staticStyle:{"font-size":".8rem"}},[e._v("Copy selected packets as")]),i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"shown"},on:{click:function(t){return e.copySelected()}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"hex"},on:{click:function(t){return e.copySelected("hex")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"raw"},on:{click:function(t){return e.copySelected("text")}}})],1)]),i("q-separator"),i("div",{staticClass:"q-pa-sm"},[i("div",{staticStyle:{"font-size":".8rem"}},[e._v("Export selected packets as")]),i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"shown"},on:{click:function(t){return e.exportSelected()}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"hex"},on:{click:function(t){return e.exportSelected("hex")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"raw"},on:{click:function(t){return e.exportSelected("text")}}})],1)]),i("q-separator"),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){e.$refs.messages&&e.$refs.messages.exportModalOpen()}}},[i("q-item-section",[e._v("Export by time")])],1)],1)],1)],1):e._e()],1):e._e(),e.activeDevice?i("packet-view",{style:{height:"calc(100vh - "+(e.isVisibleToolbar&&e.activeDevice?"150px":"100px")+")",position:"relative",overflow:"auto"},attrs:{packets:e.selectedMessages,view:e.typeOfHexView}}):e.$q.platform.is.desktop&&e.devicePreview&&e.devicePreviewMessages.length?i("div",{staticClass:"q-pa-md",staticStyle:{overflow:"hidden","max-height":"calc(100vh - 100px)"}},[i("q-timeline",{attrs:{layout:"loose",color:"white",dark:""}},e._l(e.devicePreviewMessages,(function(t,s){return i("message-preview-item",{key:s,attrs:{message:t,view:e.typeOfHexView}})})),1)],1):i("div",{staticStyle:{"text-align":"center",color:"#9e9e9e","font-size":"3rem","padding-top":"40px"}},[i("div",[e._v("Select ident")]),i("q-icon",{attrs:{name:"mdi-arrow-down-bold-outline",size:"3rem"}}),i("div",[e._v("Find message")]),i("q-icon",{attrs:{name:"mdi-arrow-down-bold-outline",size:"3rem"}}),i("div",[e._v("Analyze data")])],1)],1)],1)}),r=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper"},[i("q-resize-observer",{on:{resize:e.wrapperResizeHandler}}),i("div",[i("q-toolbar",{staticClass:"bg-grey-9"},[e.deviceCloseble?i("q-btn",{staticClass:"text-white",attrs:{flat:"",dense:"",rounded:"",icon:"mdi-arrow-left"},on:{click:e.closeDevice}},[i("q-tooltip",[e._v("Close current device")])],1):e._e(),e.deviceCloseble?i("q-toolbar-title"):e._e(),i("date-range-modal",{staticClass:"flex flex-center",attrs:{date:e.dateRange,theme:e.theme},on:{save:e.dateRangeChangeHandler}})],1),e.loadingFlag&&e.itemsCount>0?i("div",{staticClass:"absolute-bottom-right absolute-top-left",staticStyle:{overflow:"hidden",top:"50px"}},e._l(new Array(e.itemsCount).fill(""),(function(e,t){return i("message-skeleton",{key:t})})),1):!e.loadingFlag&&e.messages.length?[i("VirtualList",{ref:"scroller",class:{"bg-grey-9":!0,"text-white":!0,"cursor-pointer":!0},style:{position:"absolute",top:"50px",bottom:0,right:0,left:0,height:"auto"},attrs:{onscroll:e.listScroll,size:e.itemHeight,remain:e.itemsCount,wclass:"q-w-list"}},e._l(e.messages,(function(t,s){return i("messages-list-item",{key:s,attrs:{item:t,index:s,actions:e.actions,itemHeight:e.itemHeight,selected:e.selected.includes(s),view:e.view},on:{action:e.actionHandler,"item-click":e.messageClickHandler}})})),1)]:i("empty-pane",{attrs:{config:e.config.emptyState}})],2),i("export-modal",{ref:"export",attrs:{format:e.view,dateRange:e.dateRange,config:e.config,ident:e.device.ident,"item-id":e.activeId}})],1)},d=[],m=(i("ddb0"),i("89c1")),h=i.n(m),p=i("9b02"),u=i.n(p),g=i("de45"),v=i("cdde"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-item",{class:[e.selected?"bg-grey-8":""],staticStyle:{"user-select":"none"},attrs:{clickable:""},on:{click:function(t){e.itemClickHandler(e.index,e.item,t)}}},[i("q-tooltip",[e._v(e._s(e.eventsDesc[e.item.type]))]),e.actions?i("q-item-section",{staticClass:"q-pr-none",attrs:{side:""}},e._l(e.actions,(function(t,s){return i("q-icon",{key:s,staticClass:"cursor-pointer on-left",class:t.classes,attrs:{name:t.icon,color:e.selected?"grey-5":""},nativeOn:{click:function(i){return i.stopPropagation(),e.clickHandler(e.index,t.type,e.item)}}},[i("q-tooltip",[e._v(e._s(t.label))])],1)})),1):e._e(),i("q-item-section",[i("q-item-label",{staticClass:"ellipsis overflow-hidden q-pa-none",class:["text-"+e.eventsColors[e.item.type]+"-"+(e.selected?3:4)],attrs:{header:""}},[e._v(e._s(e.date.formatDate(1e3*e.item.timestamp,"DD/MM/YYYY HH:mm:ss")))]),e.size?i("q-item-label",{staticClass:"ellipsis overflow-hidden text-grey-5",attrs:{caption:""}},[e._v(e._s(e.size+" B : ")),i("small",[e._v(e._s(e.dataPreview))])]):e._e()],1),i("q-item-section",{attrs:{side:""}},[i("small",{class:["text-grey-"+(e.selected?5:7)]},[e._v(e._s(e.eventsDesc[e.item.type]))]),i("div",[i("small",{staticClass:"rounded-borders q-mx-xs q-px-xs text-white",class:{"bg-blue":"tcp"===e.transport,"bg-pink-4":"udp"===e.transport,"bg-green-9":"http"===e.transport,"bg-purple-9":"mqtt"===e.transport}},[e._v(e._s(e.transport))]),i("q-icon",{staticClass:"q-ml-xs",attrs:{size:"1.2rem",color:e.eventsColors[e.item.type],name:e.eventIcons[e.item.type]}})],1)])],1)},b=[],w=i("bd4c"),x=i("c423"),y={props:["item","index","actions","itemHeight","selected","view"],data(){const e={2:"tcp",66:"http",67:"http",130:"udp",3:"tcp",131:"udp",32:"mqtt",33:"mqtt",34:"mqtt",35:"mqtt"};return{date:w["a"],transport:e[this.item.type],hex:this.base64ToHex(this.item.data),eventsColors:{0:"green",32:"green",1:"red",33:"red",2:"purple",130:"purple",66:"purple",34:"purple",3:"yellow",67:"yellow",131:"yellow",35:"yellow"},eventsDesc:{0:"Connect",32:"Connect",1:"Disconnect",33:"Disconnect",2:"Data received",130:"Data received",66:"Data received",34:"Data received",3:"Data sent",67:"Data sent",131:"Data sent",35:"Data sent"},eventIcons:{0:"mdi-lan-connect",32:"mdi-lan-connect",1:"mdi-lan-disconnect",33:"mdi-lan-disconnect",2:"mdi-arrow-right-thick",130:"mdi-arrow-right-thick",66:"mdi-arrow-right-thick",34:"mdi-arrow-right-thick",3:"mdi-arrow-left-thick",67:"mdi-arrow-left-thick",35:"mdi-arrow-left-thick",131:"mdi-arrow-left-thick"}}},computed:{dataPreview(){if(!this.item.data)return"";let e=this.hex;if("text"===this.view){const t=e.match(/.{1,2}/g);e=t.map((e=>this.replaceByteWithMnemo(e))).join("")}return e},size(){return this.item.data?Math.floor(this.hex.length/2):null}},methods:{clickHandler(e,t,i){const s=o()({},i);s.data=this.dataPreview,this.$emit("action",{index:e,type:t,content:s})},itemClickHandler(e,t,i){this.$emit("item-click",{index:e,content:t,event:i})}},mixins:[x["a"]]},$=y,k=i("2877"),C=i("66e5"),q=i("05c0"),D=i("4074"),M=i("0016"),_=i("0170"),S=i("eebe"),T=i.n(S),I=Object(k["a"])($,f,b,!1,null,null,null),N=I.exports;T()(I,"components",{QItem:C["a"],QTooltip:q["a"],QItemSection:D["a"],QIcon:M["a"],QItemLabel:_["a"]});var H=i("121a"),z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-item",{staticClass:"bg-grey-9"},[i("q-item-section",[i("q-item-label",{staticClass:"q-pa-none bg-white full-width skeleton--modificator",staticStyle:{height:"16px"},attrs:{header:""}}),i("q-item-label",{staticClass:"bg-grey-6  full-width skeleton--modificator",staticStyle:{height:"15px"},attrs:{caption:""}})],1),i("q-item-section",{staticStyle:{width:"30%"},attrs:{side:""}},[i("div",{staticClass:"bg-white full-width skeleton--modificator",staticStyle:{height:"16px"}})])],1)},P=[],O=(i("2724"),{}),Q=Object(k["a"])(O,z,P,!1,null,null,null),E=Q.exports;T()(Q,"components",{QItem:C["a"],QItemSection:D["a"],QItemLabel:_["a"]});var F=i("5a3a"),L=i.n(F),G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{ref:"modal",attrs:{maximized:e.$q.platform.is.mobile,"no-esc-dismiss":e.loadingFlag,"no-backdrop-dismiss":e.loadingFlag}},[i("q-card",{staticClass:"bg-grey-9",style:{minWidth:e.$q.platform.is.mobile?"100%":"310px",height:e.$q.platform.is.mobile?"100%":"auto"}},[i("q-card-section",{staticClass:"q-pa-sm",style:{height:"calc(100% - 54px)"}},[i("date-range-picker",{attrs:{theme:{color:"white",bgColor:"grey-9",contentInverted:!0,controlsInverted:!0}},model:{value:e.currentDateRange,callback:function(t){e.currentDateRange=t},expression:"currentDateRange"}}),i("q-select",{attrs:{options:e.selectOpts,multiple:"",dark:"",outlined:"",label:"Format","hide-bottom-space":"",dense:"",color:"white","bg-color":"grey-9"},model:{value:e.currentFormat,callback:function(t){e.currentFormat=t},expression:"currentFormat"}}),i("q-toggle",{attrs:{dark:""},model:{value:e.needTimeConvert,callback:function(t){e.needTimeConvert=t},expression:"needTimeConvert"}},[i("span",{staticClass:"text-white"},[e._v("Format timestamps")])]),e.needTimeConvert?[i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"",dense:"",label:"Date format",dark:"",color:"white"},model:{value:e.timeFormat,callback:function(t){e.timeFormat=t},expression:"timeFormat"}}),i("q-select",{attrs:{options:e.timezoneOptions,"emit-value":"","map-options":"",dark:"",outlined:"",label:"Timezone","hide-bottom-space":"",dense:"",color:"white","bg-color":"grey-9"},model:{value:e.timezoneOffset,callback:function(t){e.timezoneOffset=t},expression:"timezoneOffset"}})]:e._e()],2),i("q-separator",{attrs:{color:"grey-8"}}),i("q-card-actions",{staticClass:"bg-grey-9 text-white",attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",disable:e.loadingFlag},on:{click:e.hide}},[e._v("Close")]),i("q-btn",{attrs:{flat:"",disable:e.loadingFlag||e.currentFormat.length<1,loading:e.loadingFlag},on:{click:e.importHandler}},[e._v("Export")])],1)],1)],1)},A=[],R=(i("2b3d"),i("a99f")),B={props:["format","dateRange","config","ident","itemId"],data(){return{currentFormat:[this.format],currentDateRange:this.dateRange.map((e=>new Date(e))),moduleName:this.config.vuexModuleName,loadingFlag:!1,selectOpts:["hex","text","base64"],needTimeConvert:!1,timeFormat:"YYYY/MM/DD HH:mm:ss.SSS",currentTimezoneOffset:-(new Date).getTimezoneOffset()/60,timezoneOffset:"local",timezoneOptions:[{value:"local",label:"Local time (computer`s timezone)"},{value:-12,label:"(GMT -12:00) Eniwetok, Kwajalein"},{value:-11,label:"(GMT -11:00) Midway Island, Samoa"},{value:-10,label:"(GMT -10:00) Hawaii"},{value:-9,label:"(GMT -9:00) Alaska"},{value:-8,label:"(GMT -8:00) Pacific Time (US &amp; Canada)"},{value:-7,label:"(GMT -7:00) Mountain Time (US &amp; Canada)"},{value:-6,label:"(GMT -6:00) Central Time (US &amp; Canada), Mexico City"},{value:-5,label:"(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima"},{value:-4,label:"(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz"},{value:-3.5,label:"(GMT -3:30) Newfoundland"},{value:-3,label:"(GMT -3:00) Brazil, Buenos Aires, Georgetown"},{value:-2,label:"(GMT -2:00) Mid-Atlantic"},{value:-1,label:"(GMT -1:00 hour) Azores, Cape Verde Islands"},{value:0,label:"(GMT) Western Europe Time, London, Lisbon, Casablanca"},{value:1,label:"(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris"},{value:2,label:"(GMT +2:00) Kaliningrad, South Africa"},{value:3,label:"(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg"},{value:3.5,label:"(GMT +3:30) Tehran"},{value:4,label:"(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi"},{value:4.5,label:"(GMT +4:30) Kabul"},{value:5,label:"(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent"},{value:5.5,label:"(GMT +5:30) Bombay, Calcutta, Madras, New Delhi"},{value:5.75,label:"(GMT +5:45) Kathmandu"},{value:6,label:"(GMT +6:00) Almaty, Dhaka, Colombo"},{value:7,label:"(GMT +7:00) Bangkok, Hanoi, Jakarta"},{value:8,label:"(GMT +8:00) Beijing, Perth, Singapore, Hong Kong"},{value:9,label:"(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk"},{value:9.5,label:"(GMT +9:30) Adelaide, Darwin"},{value:10,label:"(GMT +10:00) Eastern Australia, Guam, Vladivostok"},{value:11,label:"(GMT +11:00) Magadan, Solomon Islands, New Caledonia"},{value:12,label:"(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka"}]}},methods:{show(){this.$refs.modal.show()},hide(){this.$refs.modal.hide()},formatData(e,t){let i=null;return i="hex"===t?this.base64ToHex(e):"text"===t?this.base64ToTextWithMnemoReplacing(e):e,i},dateByTimezone(e,t){const i=new Date(e),s=i.getTime(),a=6e4*i.getTimezoneOffset(),n=s+a,o=36e5*t,l=n+o;return new Date(l)},async importHandler(){this.loadingFlag=!0;const e={from:Math.floor(this.currentDateRange[0].valueOf()/1e3),to:Math.floor(this.currentDateRange[1].valueOf()/1e3)},t=await this.$store.dispatch(`${this.moduleName}/getExportData`,e);t.forEach(((e,i)=>{if(this.needTimeConvert){const e=this.timeFormat||"YYYY/MM/DD HH:mm:ss";"local"===this.timezoneOffset?t[i].timestamp=w["a"].formatDate(1e3*t[i].timestamp,e):t[i].timestamp=w["a"].formatDate(this.dateByTimezone(1e3*t[i].timestamp,this.timezoneOffset),e)}if(!t[i].data)return!1;this.currentFormat.forEach((s=>{t[i][s]=this.formatData(e.data,s)})),t[i].data=void 0}));const i="application/json",s=document.createElement("a"),a=JSON.stringify(t,void 0,2),n=new Blob([a],{type:i}),o=URL.createObjectURL(n),l=`[${w["a"].formatDate(this.currentDateRange[0],"DD.MM.YYYY HH-mm-ss")} - ${w["a"].formatDate(this.currentDateRange[1],"DD.MM.YYYY HH-mm-ss")}]`,r="local"===this.timezoneOffset?this.currentTimezoneOffset:this.timezoneOffset,c=`${this.itemId}_${this.ident}${l}_${r>=0?`GMT+${r}`:`GMT${r}`}.json`;s.setAttribute("href",o),s.setAttribute("download",c),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),this.loadingFlag=!1,this.hide()}},watch:{dateRange(e){this.currentDateRange=e.map((e=>new Date(e)))},format(e){this.currentFormat=[e]}},components:{DateRangePicker:R["a"]},mixins:[x["a"]]},V=B,Y=i("24e8"),j=i("f09f"),K=i("a370"),W=i("ddd8"),U=i("9564"),J=i("27f9"),X=i("eb85"),Z=i("4b7e"),ee=i("9c40"),te=Object(k["a"])(V,G,A,!1,null,null,null),ie=te.exports;T()(te,"components",{QDialog:Y["a"],QCard:j["a"],QCardSection:K["a"],QSelect:W["a"],QToggle:U["a"],QInput:J["a"],QSeparator:X["a"],QCardActions:Z["a"],QBtn:ee["a"]});var se={props:["activeId","device","limit","config","view","deviceCloseble"],data(){return{theme:this.config.theme,viewConfig:this.config.viewConfig,actions:this.config.actions,moduleName:this.config.vuexModuleName,itemHeight:53,itemsCount:0,wrapperHeight:0,needAutoScroll:!0,selected:[],scrollerScrollTop:0}},computed:{messages:{get(){return this.$store.state[this.moduleName].messages},set(e){this.$store.commit(`${this.moduleName}/setMessages`,e)}},currentLimit:{get(){return this.$store.state[this.moduleName].limit},set(e){this.$store.commit(`${this.moduleName}/setLimit`,e)}},dateRange(){return[this.$store.state[this.moduleName].from,this.$store.state[this.moduleName].to]},from:{get(){return this.$store.state[this.moduleName].from},set(e){e=e||0,this.$store.commit(`${this.moduleName}/setFrom`,e)}},to:{get(){return this.$store.state[this.moduleName].to},set(e){e=e||0,this.$store.commit(`${this.moduleName}/setTo`,e)}},realtimeEnabled(){return this.$store.state[this.moduleName].messagePolling},loadingFlag(){const e=this.$store.state;return!(!e[this.config.vuexModuleName]||!e[this.config.vuexModuleName].isLoading)}},methods:{resetParams(){if(!this.$refs.wrapper)return!1;if(this.wrapperHeight=this.$refs.wrapper.offsetHeight-this.itemHeight,this.itemsCount=Math.ceil(this.wrapperHeight/this.itemHeight),this.$refs.scroller&&this.$refs.scroller.forceRender(),this.$refs.scroller&&this.$refs.scroller.$el){const e=this.$refs.scroller.$el;e.scrollTop+=1}},dateRangeChangeHandler(e){const t=e[0],i=e[1];if(this.from===t&&this.to===i)return!1;this.from=t,this.to=i,this.realtimeEnabled&&this.$store.dispatch(`${this.moduleName}/removePollingGetMessages`),this.needAutoScroll&&i<=Date.now()&&(this.needAutoScroll=!1),this.$store.commit(`${this.moduleName}/clearMessages`),this.$store.dispatch(`${this.moduleName}/getMessages`).then((()=>{i>Date.now()&&this.$store.dispatch(`${this.moduleName}/pollingGetMessages`)}))},clearSelected(){this.selected=[]},wrapperResizeHandler(){this.resetParams()},getScrollDirection(e){let t=null;return t=e>this.currentScrollTop?"bottom":e<this.currentScrollTop?"top":"none",t},listScroll:function(e,t){const{offset:i}=t;this.currentScrollTop||(this.currentScrollTop=i);const s=u()(this.$refs,"scroller.$el",void 0),a=s.scrollHeight-s.clientHeight,n=this.getScrollDirection(i),o=.1*a;this.allScrollTop=this.$refs.scroller?this.$refs.scroller.$el.scrollHeight-this.$refs.scroller.$el.clientHeight:0,this.messages.length&&(i<this.currentScrollTop&&this.needAutoScroll?this.needAutoScroll=!1:!this.needAutoScroll&&this.realtimeEnabled&&i>=this.allScrollTop&&(this.needAutoScroll=!0),this.currentScrollTop=i),n&&("top"===n||"none"===n)&&i<o?this.getMessagesPrev():n&&("bottom"===n||"none"===n)&&i+o>=a&&this.getMessagesNext()},getMessagesPrev(){const e=u()(this.$refs,"scroller.$el",void 0),t=e.scrollHeight-e.clientHeight,i=e.scrollTop;this.$store.dispatch(`${this.moduleName}/getMessagesPrev`).then((s=>{if(s&&s.length){const s=e.scrollHeight-e.clientHeight;e.scrollTop=s-t+i}}))},getMessagesNext(){this.$store.dispatch(`${this.moduleName}/getMessagesNext`)},actionHandler({index:e,type:t,content:i}){switch(t){case"view":this.viewMessagesHandler({index:e,content:i});break;case"copy":this.copyMessageHandler({index:e,content:i});break}},viewMessagesHandler({index:e,content:t}){this.selected=[e],this.$root.$emit("view-data",t)},messageClickHandler({index:e,content:t,event:i}){if(i.shiftKey)this.selected[0]?this.selected[0]>e?this.selected=L()(e,this.selected[0]+1):this.selected=L()(this.selected[0],e+1):this.selected=[e];else if(i.ctrlKey||i.metaKey)if(this.selected.includes(e)){const t=this.selected;t.splice(this.selected.indexOf(e),1),this.selected=t}else this.selected=[...this.selected,e];else this.selected=[e];this.needAutoScroll&&(this.needAutoScroll=!1),this.selected.sort(((e,t)=>e-t)),this.$emit("view-data",this.selected.map((e=>o()(o()({},this.messages[e]),{},{index:e}))))},copyMessageHandler({index:e,content:t}){Object(v["a"])(JSON.stringify(t)).then((e=>{this.$q.notify({type:"positive",icon:"content_copy",message:"Message copied",timeout:1e3})}),(e=>{this.$q.notify({type:"negative",icon:"content_copy",message:"Error coping messages",timeout:1e3})}))},unselect(){this.selected.length&&(this.selected=[])},closeDevice(){this.$emit("close")},clear(){this.realtimeEnabled&&this.$store.dispatch(`${this.moduleName}/removePollingGetMessages`),this.$store.commit(`${this.moduleName}/clearMessages`),this.closeDevice()},exportModalOpen(){this.$refs.export.show()},highlightIncoming(e,t){const i=this.messages.findIndex((e=>2===e.type)),s=this.messages.findIndex((e=>2===e.type&&Math.floor(e.timestamp)===Math.floor(this.to/1e3)));s>-1?this.messageClickHandler({index:s,event:{}}):i>-1&&this.messageClickHandler({index:i,event:{}})},async init(){this.currentLimit=this.limit,this.activeId&&!this.$store.state[this.moduleName].active&&this.$store.commit(`${this.moduleName}/setActive`,this.activeId),this.device&&!this.$store.state[this.moduleName].ident&&this.$store.commit(`${this.moduleName}/setIdent`,this.device.ident);const e=1e3*this.$route.query.from,t=1e3*this.$route.query.to;e&&t?(this.from=e,this.to=t,await this.$store.dispatch(`${this.moduleName}/getMessages`),this.$nextTick(this.highlightIncoming)):(await this.$store.dispatch(`${this.moduleName}/initTime`),await this.$store.dispatch(`${this.moduleName}/getMessagesTail`)),this.to>Date.now()&&await this.$store.dispatch(`${this.moduleName}/pollingGetMessages`)}},watch:{activeId(e){this.clear()},limit(e){this.currentLimit=e}},created(){this.init()},mounted(){this.resetParams()},updated(){this.messages.length?this.needAutoScroll&&this.$refs.scroller&&this.$refs.scroller.$el&&(this.$refs.scroller.$el.scrollTop=this.$refs.scroller.$el.scrollHeight):this.currentScrollTop=0},destroyed(){this.$store.dispatch(`${this.moduleName}/removePollingGetMessages`),this.$store.commit(`${this.moduleName}/clearMessages`),this.to=0,this.from=0},components:{MessagesListItem:N,VirtualList:h.a,EmptyPane:H["a"],MessageSkeleton:E,DateRangeModal:g["a"],ExportModal:ie}},ae=se,ne=i("3980"),oe=i("65c6"),le=i("6ac5"),re=Object(k["a"])(ae,c,d,!1,null,null,null),ce=re.exports;T()(re,"components",{QResizeObserver:ne["a"],QToolbar:oe["a"],QBtn:ee["a"],QTooltip:q["a"],QToolbarTitle:le["a"]});var de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper"},[i("q-resize-observer",{on:{resize:e.wrapperResizeHandler}}),i("div",[i("q-toolbar",{staticClass:"bg-grey-9"},[i("q-input",{staticClass:"full-width",attrs:{outlined:"","hide-bottom-space":"",rounded:"",dense:"",color:"white",dark:"",placeholder:"ident",debounce:500},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"prepend",name:"mdi-magnify",color:"white"},slot:"prepend"})],1)],1),e.loadingFlag&&e.itemsCount>0?i("div",{staticClass:"absolute-bottom-right absolute-top-left",staticStyle:{overflow:"hidden",top:"50px"}},e._l(new Array(e.itemsCount).fill(""),(function(e,t){return i("device-skeleton",{key:t})})),1):!e.loadingFlag&&e.devicesByIndex.length?[i("VirtualList",{ref:"scroller",class:{"bg-grey-9":!0,"text-white":!0,"cursor-pointer":!0},style:{position:"absolute",top:"50px",bottom:0,right:0,left:0,height:"auto"},attrs:{size:e.itemHeight,remain:e.itemsCount,wclass:"q-w-list"}},e._l(e.devices,(function(t,s){return i("device-list-item",{key:t.ident,attrs:{item:t,index:s,itemHeight:e.itemHeight},on:{"item-click":e.deviceClickHandler},nativeOn:{mouseenter:function(i){return e.previewDeviceHandler(t)},mouseleave:function(i){return e.previewDeviceCloseHandler(t)}}})})),1)]:i("empty-pane",{attrs:{config:e.config.emptyState}})],2)],1)},me=[],he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-item",{staticClass:"q-py-none",attrs:{clickable:""},on:{click:function(t){e.itemClickHandler(e.index,e.item,t)}}},[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis text-white q-pa-none",attrs:{header:""}},[e._v(e._s(e.ident))]),i("q-item-label",{staticClass:"ellipsis overflow-hidden text-grey-5",attrs:{caption:""}},[e._v(e._s(e.item.size?e.format.humanStorageSize(e.item.size):"new"))])],1)],1)},pe=[],ue=i("7937"),ge={props:["item","index","itemHeight"],data(){return{date:w["a"],format:ue["c"],ident:this.item.ident}},methods:{itemClickHandler(e,t,i){this.$emit("item-click",{index:e,content:t,event:i})}}},ve=ge,fe=Object(k["a"])(ve,he,pe,!1,null,null,null),be=fe.exports;T()(fe,"components",{QItem:C["a"],QItemSection:D["a"],QItemLabel:_["a"]});var we=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-item",{staticClass:"bg-grey-9"},[i("q-item-section",[i("q-item-label",{staticClass:"q-pa-none bg-white full-width skeleton--modificator",staticStyle:{height:"16px"},attrs:{header:""}}),i("q-item-label",{staticClass:"bg-grey-6  full-width skeleton--modificator",staticStyle:{height:"15px"},attrs:{caption:""}})],1)],1)},xe=[],ye=(i("a24e"),{}),$e=Object(k["a"])(ye,we,xe,!1,null,null,null),ke=$e.exports;T()($e,"components",{QItem:C["a"],QItemSection:D["a"],QItemLabel:_["a"]});var Ce={props:["activeId","device","config","view"],data(){return{theme:this.config.theme,viewConfig:this.config.viewConfig,actions:this.config.actions,moduleName:this.config.vuexModuleName,itemHeight:48,itemsCount:0,wrapperHeight:0}},computed:{selectedChannel(){const e=this.$store.state.channels[this.activeId],t=this.$store.state.channelsProtocols[e.protocol_id].features;return e.features=t,e},devices:{get(){return this.$store.state[this.moduleName].devices},set(e){this.$store.commit(`${this.moduleName}/setDevices`,e)}},devicesByIndex(){return Object.values(this.$store.state[this.moduleName].devices)},filter:{get(){return this.$store.state[this.moduleName].deviceFilter},set(e){this.$store.commit(`${this.moduleName}/setDeviceFilter`,e),this.$store.dispatch(`${this.moduleName}/getDevices`).then((()=>{this.$nextTick((()=>{this.$refs.scroller&&this.$refs.scroller.forceRender()}))}))}},active:{get(){return this.$store.state[this.moduleName].active},async set(e){this.realtimeEnabled&&await this.$store.dispatch(`${this.moduleName}/removePollingGetDevices`),this.$store.commit(`${this.moduleName}/setActive`,e),this.$store.commit(`${this.moduleName}/clearDevices`),await this.$store.dispatch(`${this.moduleName}/getDevices`),this.selectedChannel.features.shared_connection||await this.$store.dispatch(`${this.moduleName}/pollingGetDevices`)}},realtimeEnabled(){return this.$store.state[this.moduleName].realtimeEnabled},loadingFlag(){const e=this.$store.state;return!(!e[this.config.vuexModuleName]||!e[this.config.vuexModuleName].isLoading)}},methods:{resetParams(){if(!this.$refs.wrapper)return!1;this.wrapperHeight=this.$refs.wrapper.offsetHeight-this.itemHeight,this.itemsCount=Math.ceil(this.wrapperHeight/this.itemHeight),this.$refs.scroller&&this.$refs.scroller.forceRender()},wrapperResizeHandler(){this.resetParams()},deviceClickHandler({index:e,content:t,event:i}){this.$store.commit(`${this.moduleName}/setIdent`,t.ident),this.$emit("change:device",t)},previewDeviceHandler(e){this.$emit("device:preview",e)},previewDeviceCloseHandler(e){this.$emit("device:preview-hide",e)},clearDevices(){this.devices={}}},watch:{activeId(e){this.active=e}},created(){const e=this.$route.query.filter;e&&this.$store.commit(`${this.moduleName}/setDeviceFilter`,e),this.activeId&&(this.active=this.activeId)},mounted(){this.resetParams()},components:{VirtualList:h.a,DeviceListItem:be,EmptyPane:H["a"],DeviceSkeleton:ke}},qe=Ce,De=Object(k["a"])(qe,de,me,!1,null,null,null),Me=De.exports;T()(De,"components",{QResizeObserver:ne["a"],QToolbar:oe["a"],QInput:J["a"],QIcon:M["a"]});var _e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-timeline-entry",{staticClass:"hex-viewer__timeline-element",attrs:{side:2===e.message.type||130===e.message.type?"left":"right",color:e.eventsColors[e.message.type]+"-6"}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("div",{staticStyle:{"line-height":"18px"}},[i("span",[e._v(e._s(e.eventsDesc[e.message.type]))])]),i("div",{staticClass:"text-grey-5",staticStyle:{"font-size":".7rem"}},[e._v("\n      "+e._s(e.date.formatDate(1e3*e.message.timestamp,"DD/MM/YYYY HH:mm:ss"))+"\n      "),i("small",{staticClass:"rounded-borders q-mx-xs q-px-xs text-white",class:{"bg-blue":"tcp"===e.transport,"bg-pink-4":"udp"===e.transport,"bg-green-9":"http"===e.transport,"bg-purple-9":"mqtt"===e.transport}},[e._v(e._s(e.transport))])])]),i("div",{staticClass:"ellipsis",staticStyle:{"word-break":"break-all","font-size":".8rem",height:"1rem"}},[e._v(e._s(e.dataPreview))])])},Se=[],Te={props:["message","view"],data(){return{date:w["a"],transports:{2:"tcp",66:"http",67:"http",130:"udp",3:"tcp",131:"udp",32:"mqtt",33:"mqtt",34:"mqtt",35:"mqtt"},eventsColors:{0:"green",32:"green",1:"red",33:"red",2:"purple",130:"purple",66:"purple",34:"purple",3:"yellow",67:"yellow",131:"yellow",35:"yellow"},eventsDesc:{0:"Connect",32:"Connect",1:"Disconnect",33:"Disconnect",2:"Data received",130:"Data received",66:"Data received",34:"Data received",3:"Data sent",67:"Data sent",131:"Data sent",35:"Data sent"},eventIcons:{0:"mdi-lan-connect",32:"mdi-lan-connect",1:"mdi-lan-disconnect",33:"mdi-lan-disconnect",2:"mdi-arrow-right-thick",130:"mdi-arrow-right-thick",66:"mdi-arrow-right-thick",34:"mdi-arrow-right-thick",3:"mdi-arrow-left-thick",67:"mdi-arrow-left-thick",35:"mdi-arrow-left-thick",131:"mdi-arrow-left-thick"}}},computed:{dataPreview(){let e=this.base64ToHex(this.message.data)||"";if("text"===this.view&&e){const t=e.match(/.{1,2}/g);e=t.map((e=>this.replaceByteWithMnemo(e))).join("")}return e},transport(){return this.transports[this.message.type]}},mixins:[x["a"]]},Ie=Te,Ne=(i("cb33"),i("74af")),He=i("05eb"),ze=Object(k["a"])(Ie,_e,Se,!1,null,null,null),Pe=ze.exports;T()(ze,"components",{QTimelineEntry:Ne["a"],QTimeline:He["a"]});var Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.packets&&e.packets.length?i("div",{staticClass:"traffic-viewer__packets q-pa-sm"},e._l(e.batches,(function(t,s){return i("div",{key:s,staticStyle:{"min-width":"820px"}},[e.batches[s-1]?i("div",{staticClass:"packets__separator",style:{backgroundColor:e.bgDataColors[t.type]}}):e._e(),i("div",{staticClass:"packet__header text-center",style:{backgroundColor:e.bgDataColors[t.type]}},[i("span",{staticClass:"rounded-borders text-white full-height"},[i("q-icon",{staticStyle:{"vertical-align":"text-bottom"},attrs:{size:"1rem",color:e.eventsColors[t.type],name:e.eventIcons[t.type]}}),i("span",{staticClass:"text-uppercase text-white"},[e._v(e._s(e.eventsDesc[t.type]))]),e._v("\n        (\n        "),i("span",{staticClass:"text-white",class:{"q-mr-sm":t.size},staticStyle:{"font-size":".8rem"}},[e._v(e._s(e.date.formatDate(1e3*t.timestamp,"DD/MM/YYYY HH:mm:ss")))]),t.size?i("span",{staticClass:"q-mr-sm text-white",staticStyle:{"font-size":".8rem"}},[e._v("size: "+e._s(t.size)+"B")]):e._e(),t.transport?i("small",{staticClass:"rounded-borders q-px-xs text-white",class:{"bg-blue":"tcp"===t.transport,"bg-pink-4":"udp"===t.transport,"bg-green-9":"http"===t.transport,"bg-purple-9":"mqtt"===t.transport},staticStyle:{"vertical-align":"middle"}},[e._v("\n          "+e._s(t.transport)+"\n        ")]):e._e(),e._v("\n        )\n      ")],1)]),t.data?i("hex-viewer",{style:{backgroundColor:e.bgDataColors[t.type]},attrs:{hex:t.data,view:e.view}}):e._e(),e.batches[s+1]?i("div",{staticClass:"packets__separator",style:{backgroundColor:e.bgDataColors[t.type]}}):e._e(),e.getNeedMissing(s)?i("div",{staticClass:"packets__missing"},[i("div",{staticClass:"missing__up"}),i("div",{staticClass:"missing__down"})]):e._e()],1)})),0):i("div",{staticStyle:{"text-align":"center",color:"#9e9e9e","font-size":"3rem","padding-top":"40px"}},[e._v("Select packets")])},Qe=[],Ee=i("d77f"),Fe={props:["packets","view"],data(){return{date:w["a"],transports:{2:"tcp",66:"http",67:"http",130:"udp",3:"tcp",131:"udp",32:"mqtt",33:"mqtt",34:"mqtt",35:"mqtt"},eventsColors:{0:"green",32:"green",1:"red",33:"red",2:"purple",130:"purple",66:"purple",34:"purple",3:"yellow",67:"yellow",131:"yellow",35:"yellow"},eventsDesc:{0:"Connect",32:"Connect",1:"Disconnect",33:"Disconnect",2:"Data received",130:"Data received",66:"Data received",34:"Data received",3:"Data sent",67:"Data sent",131:"Data sent",35:"Data sent"},eventIcons:{0:"mdi-lan-connect",32:"mdi-lan-connect",1:"mdi-lan-disconnect",33:"mdi-lan-disconnect",2:"mdi-arrow-right-thick",130:"mdi-arrow-right-thick",66:"mdi-arrow-right-thick",34:"mdi-arrow-right-thick",3:"mdi-arrow-left-thick",67:"mdi-arrow-left-thick",35:"mdi-arrow-left-thick",131:"mdi-arrow-left-thick"},bgDataColors:{0:"rgba(76, 175, 80, 0.4)",32:"rgba(76, 175, 80, 0.4)",1:"rgba(244, 67, 54, 0.4)",33:"rgba(244, 67, 54, 0.4)",2:"rgba(156, 39, 176, 0.4)",130:"rgba(156, 39, 176, 0.4)",34:"rgba(156, 39, 176, 0.4)",66:"rgba(156, 39, 176, 0.4)",3:"rgba(255, 235, 59, 0.4)",67:"rgba(255, 235, 59, 0.4)",35:"rgba(255, 235, 59, 0.4)",131:"rgba(255, 235, 59, 0.4)"}}},computed:{batches(){return this.packets&&this.packets.length?this.packets.reduce(((e,t,i)=>{const s=o()({},t);s.data=this.base64ToHex(t.data),s.index=[s.index],s.transport=this.transports[s.type],s.data&&(s.size=Math.floor(s.data.length/2));const a=e[e.length-1];return a&&a.type===s.type&&2===s.type&&a.conn===s.conn&&a.index[a.index.length-1]+1===s.index[0]?(a.data+=s.data,a.size+=s.size,a.index=[...a.index,...s.index]):e.push(s),e}),[]):[]}},methods:{getNeedMissing(e){const t=this.batches[e],i=this.batches[e+1];return i&&t.index[t.index.length-1]+1<i.index[0]}},mixins:[x["a"]],components:{HexViewer:Ee["a"]}},Le=Fe,Ge=(i("aff9"),Object(k["a"])(Le,Oe,Qe,!1,null,null,null)),Ae=Ge.exports;T()(Ge,"components",{QIcon:M["a"]});i("26e9");var Re=i("2b0e");function Be(e){const t=e||Date.now(),i=new Date(t).setHours(0,0,0,0),s=i+86399999;return{from:i,to:s}}async function Ve({state:e,commit:t}){let i=Date.now();try{const t=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{count:1,reverse:!0}});i=u()(t,"data.result[0].timestamp",Math.floor(Date.now()/1e3)),i=Math.round(1e3*i)}catch(a){}const s=Be(i);t("setFrom",s.from),t("setTo",s.to)}async function Ye({state:e,commit:t}){"undefined"!==typeof e.isLoading&&Re["default"].set(e,"isLoading",!0);try{const i=await Re["default"].connector.gw.getChannelsIdents(e.active,e.deviceFilter?`*${e.deviceFilter}*`:"*");let s=u()(i,"data.result",[]);s=s.reduce(((e,{ident:t,size:i})=>(e[t]={ident:t,size:i},e)),{}),t("setDevices",s)}catch(i){t("reqFailed",i)}"undefined"!==typeof e.isLoading&&Re["default"].set(e,"isLoading",!1)}async function je({state:e,commit:t}){"undefined"!==typeof e.isLoading&&Re["default"].set(e,"isLoading",!0);try{const i=Date.now(),s=e.to>i?i:e.to,a=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{from:Math.floor(e.from/1e3),to:Math.floor(s/1e3),count:e.limit}}),n=u()(a,"data.result",[]);t("setMessages",n)}catch(i){t("reqFailed",i)}"undefined"!==typeof e.isLoading&&Re["default"].set(e,"isLoading",!1)}async function Ke({state:e,commit:t}){"undefined"!==typeof e.isLoading&&Re["default"].set(e,"isLoading",!0);try{const i=Date.now(),s=e.to>i?i:e.to,a=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{count:e.limit,reverse:!0,from:Math.floor(e.from/1e3),to:Math.floor(s/1e3)}}),n=u()(a,"data.result",[]);n.reverse(),t("setMessages",n)}catch(i){t("reqFailed",i)}"undefined"!==typeof e.isLoading&&Re["default"].set(e,"isLoading",!1)}let We=!1;async function Ue({state:e,commit:t}){if(!e.messages.length||We||e.messagePolling)return;We=!0;let i=[];try{const s=Math.ceil(e.messages[e.messages.length-1].timestamp),a=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{count:e.limit,from:s,to:Math.floor(e.to/1e3)}});i=u()(a,"data.result",[]),t("setMessagesAppend",i)}catch(s){t("reqFailed",s)}return We=!1,i}async function Je({state:e,commit:t}){if(!e.messages.length||We)return;We=!0;let i=[];try{const s=Math.floor(e.messages[0].timestamp)-1,a=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{count:e.limit,from:Math.floor(e.from/1e3),to:s,reverse:!0}});i=u()(a,"data.result",[]),i.reverse(),t("setMessagesPrepend",i)}catch(s){t("reqFailed",s)}return We=!1,i}async function Xe({state:e,commit:t}){await Re["default"].connector.socket.subscribe({name:`flespi/log/gw/channels/${e.active}/connections/+/identified`,handler:(t,i,s)=>{t=JSON.parse(t.toString());const a=t.ident;e.devices[a]||-1===a.indexOf(e.deviceFilter)||Re["default"].set(e.devices,a,{ident:a})}}),e.realtimeEnabled=!0}async function Ze({state:e,commit:t}){e.realtimeEnabled=!1,await Re["default"].connector.socket.unsubscribe(`flespi/log/gw/channels/${e.active}/connections/+/identified`)}let et=0;function tt({state:e,commit:t}){et=setInterval((async()=>{try{const i=Math.ceil(e.messages[e.messages.length-1].timestamp),s=Math.ceil(Date.now()/1e3),a=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{from:i,to:s}}),n=u()(a,"data.result",[]);t("setMessagesAppend",n)}catch(i){t("reqFailed",i)}}),1e4),e.messagePolling=!0}function it({state:e,commit:t}){clearInterval(et),et=0,e.messagePolling=!1}async function st({state:e},t){let i=[];try{const s=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,t.ident,{data:{count:20,reverse:!0}});i=u()(s,"data.result",[])}catch(s){}return i}async function at({state:e},{from:t,to:i}){let s=[];try{const a=await Re["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,{data:{from:t,to:i}});s=u()(a,"data.result",[])}catch(a){}return s}var nt={initTime:Ve,getMessages:je,getMessagesTail:Ke,getMessagesNext:Ue,getMessagesPrev:Je,getDevices:Ye,pollingGetDevices:Xe,removePollingGetDevices:Ze,pollingGetMessages:tt,removePollingGetMessages:it,getDevicePreview:st,getExportData:at};function ot(e,t){e.limit=t}function lt(e,t){e.active=t}function rt(e){e.messages=[]}function ct(e){e.devices=[]}function dt(e,t){e.devices=t}function mt(e,t){e.messages=t}function ht(e,t){e.messages.splice(e.messages.length,0,...t)}function pt(e,t){e.messages.splice(0,0,...t)}function ut(e,t){e.to=t}function gt(e,t){e.from=t}function vt(e,t){e.deviceFilter=t}function ft(e,t){e.ident=t}function bt(e){e.devices={},e.messages=[],e.to=0,e.from=0,e.active=null}function wt(e,t){}var xt={setLimit:ot,setActive:lt,clearMessages:rt,clearDevices:ct,setDevices:dt,setMessages:mt,setMessagesAppend:ht,setMessagesPrepend:pt,clean:bt,setTo:ut,setFrom:gt,setDeviceFilter:vt,setIdent:ft,reqFailed:wt};const yt={devices:{},messages:[],active:null,ident:null,limit:0,deviceFilter:"",from:0,to:0,isLoading:!1,realtimeEnabled:!1,messagePolling:!1};var $t={namespaced:!0,state:yt,actions:nt,mutations:xt},kt=i("798f"),Ct={props:["active","activeDevice","isVisibleToolbar","config","deviceCloseble"],data(){return{devicePreview:null,typeOfHexView:"hex",limit:1e3,selectedMessages:"",moduleName:this.config.messages.vuexModuleName,devicePreviewMessages:[]}},computed:{hex(){return!(!this.selectedMessages||!this.activeDevice)&&this.selectedMessages.reduce(((e,t)=>(e+=this.base64ToHex(t.data)||"",e)),"")}},methods:{async previewShow(e){this.devicePreview=e,this.devicePreviewMessages=await this.$store.dispatch(`${this.moduleName}/getDevicePreview`,e)},previewHide(e){this.devicePreview=null},getContentBySelected(e){return this.selectedMessages.reduce(((t,i)=>(t+=this.getHeader(i),t+="\r\n",i.data&&(t+=this.getContent(e,this.base64ToHex(i.data),this.typeOfHexView)),t+="\r\n",t)),"")},copySelected(e="view"){const t=this.getContentBySelected(e);this.copy(t,e)},exportSelected(e="view"){const t=this.getContentBySelected(e);this.exportData(t,e)}},created(){this.$store.state[this.moduleName]||this.$store.registerModule(this.moduleName,$t)},destroyed(){this.$store.commit(`${this.moduleName}/clean`),this.$store.dispatch(`${this.moduleName}/removePollingGetDevices`),this.$store.unregisterModule(this.moduleName)},watch:{active(){this.selectedMessages="",this.devicePreview=null}},mixins:[kt["a"]],components:{Devices:Me,Messages:ce,MessagePreviewItem:Pe,PacketView:Ae}},qt=Ct,Dt=i("4e73"),Mt=i("1c1c"),_t=i("7f67"),St=Object(k["a"])(qt,l,r,!1,null,null,null),Tt=St.exports;T()(St,"components",{QToolbar:oe["a"],QIcon:M["a"],QToolbarTitle:le["a"],QBtn:ee["a"],QTooltip:q["a"],QMenu:Dt["a"],QList:Mt["a"],QSeparator:X["a"],QItem:C["a"],QItemSection:D["a"],QTimeline:He["a"]}),T()(St,"directives",{ClosePopup:_t["a"]});var It=i("a99a"),Nt=i("2f62"),Ht=i("286e"),zt={name:"PageTrafficViewer",props:["limit","isLoading","isVisibleToolbar","isNeedSelect","config","settings"],mixins:[Ht["a"]],data(){return{active:null,activeDevice:null,relatedDeviceId:null,isInit:!1,isItemsInit:!1,isItemsInitStart:!1,filter:"",prevEntity:null,isIntegration:this.$q.platform.within.iframe}},computed:o()(o()({},Object(Nt["d"])({tokenType(e){return e.tokenInfo&&e.tokenInfo.access?e.tokenInfo.access.type:-1},items(e){return Object.values(e.channels||{}).filter((t=>e.channelsProtocols[t.protocol_id].features.raw_packets))}})),{},{filteredItems(){const e=this.filter.toLowerCase(),t=this.filter?this.items.filter((t=>t&&"undefined"!==typeof t.name&&null!==t.name&&t.name.toLowerCase().indexOf(e)>=0||t&&"undefined"!==typeof t.id&&null!==t.id&&(t.id+"").indexOf(e)>=0)):this.items;return t.sort(((e,t)=>{if(!e.name)return-1;if(!t.name)return 1;const i=e.name.toLowerCase(),s=t.name.toLowerCase();return i<s?-1:1})),t},selectedItem(){return this.items.filter((e=>e.id===this.active))[0]||null},needShowBackToChannel(){return this.active&&(!this.isIntegration||this.isIntegration&&("channels"===this.prevEntity&&!this.isNeedSelect||this.isNeedSelect&&!("string"===typeof this.isNeedSelect&&this.isNeedSelect.indexOf("channels")>-1)))},needShowBackToDevice(){return this.active&&this.activeDevice&&this.relatedDeviceId&&(!this.isIntegration||this.isIntegration&&("devices"===this.prevEntity&&!this.isNeedSelect||this.isNeedSelect))}}),methods:{changeActiveDeviceHandler(e){this.setActiveDevice(e),this.active?this.activeDevice?this.$router.push(`/tools/traffic/${this.active}/ident/${e.ident}`).catch((e=>e)):this.$router.push(`/tools/traffic/${this.active}`).catch((e=>e)):this.$router.push("/tools/traffic").catch((e=>e))},unselect(){this.$refs.messages.unselect()},viewLogsHandler(){this.$router.push(`/channels/${this.active}`).catch((e=>e))},setActiveDevice(e){this.activeDevice=e,this.getRelatedDeviceId()},getRelatedDeviceId(){this.activeDevice?this.$connector.gw.getChannelProtocolsDeviceTypes(this.selectedItem.protocol_id,"all",{fields:"id"}).then((e=>{const t=u()(e,"data.result",[]);return t.map((e=>e.id))})).then((e=>{this.$connector.gw.getDevices(`configuration.ident=${this.activeDevice.ident}`,{fields:"id,device_type_id"}).then((t=>{const i=u()(t,"data.result",[]),s=i.reduce(((t,i)=>t||(e.includes(i.device_type_id)?i.id:t)),0);this.relatedDeviceId=s}))})):this.relatedDeviceId=null},goToDevice(){this.$router.push(`/devices/${this.relatedDeviceId}`).catch((e=>e))},init(){const e="tools/traffic",t=u()(this.settings,`entities[${e}]`,void 0);this.isInit=!0,this.$route.params&&this.$route.params.id?this.items.filter((e=>e.id===Number(this.$route.params.id))).length?(this.active=Number(this.$route.params.id),this.$route.params.ident&&this.setActiveDevice({ident:this.$route.params.ident})):this.active=null:t&&this.items.filter((e=>e.id===t)).length&&(this.active=t),this.$emit("inited")}},beforeRouteEnter(e,t,i){i((e=>{e.prevEntity=t.meta.moduleName}))},watch:{$route(e){e.params&&e.params.id?this.items.filter((t=>t.id===Number(e.params.id))).length?(this.active=Number(e.params.id),this.$route.params.ident&&this.setActiveDevice({ident:this.$route.params.ident})):this.isInit&&(this.active=null):e.params&&!e.params.id&&(this.active=null)},active(e){const t=this.items.filter((t=>t.id===e))[0]||{};e?(this.$emit("update:settings",{type:"ENTITY_CHANGE",opt:{entity:"tools/traffic"},value:t.id}),this.activeDevice?this.$router.push(`/tools/traffic/${e}/ident/${this.activeDevice.ident}`).catch((e=>e)):this.$router.push(`/tools/traffic/${e}`).catch((e=>e))):this.$router.push("/tools/traffic").catch((e=>e))}},components:{TrafficViewer:Tt,EntitiesToolbar:It["a"]}},Pt=zt,Ot=(i("8b7b"),i("9989")),Qt=i("8572"),Et=Object(k["a"])(Pt,s,a,!1,null,null,null);t["default"]=Et.exports;T()(Et,"components",{QPage:Ot["a"],QSelect:W["a"],QInput:J["a"],QIcon:M["a"],QItem:C["a"],QItemSection:D["a"],QItemLabel:_["a"],QBtn:ee["a"],QField:Qt["a"]})},2510:function(e,t,i){},2724:function(e,t,i){"use strict";i("ce46")},"3b24":function(e,t,i){},"8b7b":function(e,t,i){"use strict";i("2510")},a24e:function(e,t,i){"use strict";i("3b24")},aff9:function(e,t,i){"use strict";i("076c")},cb33:function(e,t,i){"use strict";i("efe3")},ce46:function(e,t,i){},efe3:function(e,t,i){}}]);