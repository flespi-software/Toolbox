(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"013f":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-page window-height window-width bg-light column items-center no-wrap"},[t.$q.platform.is.mobile&&t.$q.platform.within.iframe?t._e():o("a",{attrs:{href:"https://github.com/flespi-software/Toolbox/",target:"_blank"}},[o("img",{staticClass:"absolute-top-right",staticStyle:{border:"0",width:"149px",height:"149px"},attrs:{src:n("11ea"),alt:"Fork me on GitHub"}})]),o("div",{staticClass:"login-back flex items-center justify-center"},[o("div",{staticClass:"login-code flex justify-center"},[o("img",{staticStyle:{"max-width":"80vw"},style:{maxHeight:t.$q.platform.is.mobile?"80px":"18vw"},attrs:{src:n("83dd"),alt:"Toolbox"}}),t.$route.params.token?o("div",[o("div",{staticClass:"login-card shadow-4 bg-white column items-center justify-center no-wrap"},[o("q-circular-progress",{staticStyle:{width:"100%",height:"45px"},attrs:{indeterminate:"",color:"green-6"}})],1)]):o("div",[!t.canLogin||t.$q.platform.within.iframe?o("div",{staticClass:"login-card shadow-4 bg-white column items-center justify-center no-wrap"},[o("div",{staticClass:"row full-width"},[o("div",{staticClass:"col-12 text-center text-red text-bold"},[o("big",[t._v("Token has been expired or revoked")])],1)])]):o("div",{staticClass:"login-card shadow-4 bg-white column items-center justify-center no-wrap"},[o("p",{staticClass:"text-center text-grey-9"},[t._v("Swiss knife to view and analyze flespi data")]),o("div",{staticClass:"row full-width"},[o("div",{staticClass:"col-12 text-center"},[o("q-btn",{attrs:{icon:"mdi-account-circle",color:"red-7",rounded:"",label:"login / register",size:t.$q.platform.is.mobile?"md":"lg"},on:{click:function(e){return t.openWindow(t.$authHost+"/login/#/providers")}}})],1)])])])])])])},i=[],s=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("a481"),n("7f7f"),n("c47a")),r=n.n(s),c=n("2b0e"),a=n("2f62");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={data:function(){return{token:"",icons:{facebook:"mdi-facebook-box",google:"mdi-google-plus-box",live:"mdi-windows",github:"mdi-github-box",email:"mdi-at"},canLogin:!0}},computed:d(d({},Object(a["d"])({sessionSettings:function(t){return t.sessionSettings}})),{},{model:{get:function(){return this.token},set:function(t){this.token=t}},tokenInfo:function(){return this.$store.state.tokenInfo}}),methods:d(d(d({},Object(a["b"])(["initConnection"])),Object(a["c"])(["setRegions","setToken","setToolboxSessionSettings"])),{},{goto:function(t){var e=this;if(this.tokenInfo)this.$router.push(t).catch((function(t){return t}));else{var n=!1,o=!1,i=function(){e.$router.push(t).catch((function(t){return t})),n&&c["default"].connector.socket.off("connect",n),o&&c["default"].connector.socket.off("error",o)};n=c["default"].connector.socket.on("connect",i),o=c["default"].connector.socket.on("error",i)}},logIn:function(t){var e=this;this.initConnection({token:this.token,region:t}).then((function(){e.$nextTick((function(){e.$route.params&&e.$route.params.goto?e.goto(e.$route.params.goto):e.goto("/")}))}))},autoLogin:function(){var t=this;this.initConnection({token:this.$route.params.token}).then((function(){t.goto("/")}))},checkHasToken:function(){var t=this.sessionSettings||{},e=t.token,n=t.region;this.$route.params&&this.$route.params.token?this.autoLogin():e&&(this.token=e,this.logIn(n))},openWindow:function(t,e){e=e||"auth";var n=500,o=600,i=void 0!==window.screenLeft?window.screenLeft:screen.left,s=void 0!==window.screenTop?window.screenTop:screen.top,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,a=r/2-n/2+i,l=c/2-o/2+s,d=window.open(t,e,"toolbar=no,location=no,status=yes,resizable=yes,scrollbars=yes, width="+n+", height="+o+", top="+l+", left="+a);window.focus&&d.focus()},regionInitFromAuth:function(t){this.setRegions(r()({},t.name,t)),this.setToolboxSessionSettings({region:t}),this.$connector.setRegion(t)}}),watch:{$route:function(t){t.params&&t.params.token&&this.autoLogin()}},created:function(){var t=this;this.sessionSettings&&this.sessionSettings.isVisibleToolbar&&(this.canLogin=this.sessionSettings.isVisibleToolbar);var e=function e(n){if("string"===typeof n.data&&~n.data.indexOf("FlespiLogin|token:")){window.removeEventListener("message",e);var o=n.data;o=o.replace("FlespiLogin|token:",""),o=JSON.parse(o),t.token=o.token,t.regionInitFromAuth(o.region),t.setToken(o.token),t.logIn()}};window.addEventListener("message",e),this.checkHasToken()}},f=u,h=(n("1139"),n("2877")),g=Object(h["a"])(f,o,i,!1,null,null,null);e["default"]=g.exports},1139:function(t,e,n){"use strict";var o=n("13df"),i=n.n(o);i.a},"11ea":function(t,e,n){t.exports=n.p+"img/right-graphite@2x.dd9f3440.png"},"13df":function(t,e,n){},"83dd":function(t,e,n){t.exports=n.p+"img/toolbox.a2db43b1.png"}}]);