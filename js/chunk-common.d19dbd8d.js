(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0463":function(e,t,i){"use strict";i("ddb0"),i("2b3d");var s=i("f59f"),a=i("bd4c");t["a"]={data(){return{isFileCsvLoading:!1}},methods:{async exportCsv(){const e=this.$store.state[this.moduleName],t={filter:`${e.filter}`,from:Math.floor(e.from/1e3),to:Math.floor(e.to/1e3)};this.isFileCsvLoading=!0;const i=await this.$store.dispatch(`${this.moduleName}/getMessages`,t),n=e.cols,o=n.schemas[n.activeSchema].cols.map((e=>e.name));let r="";try{r=Object(s["parse"])(i,{fields:o})}catch(c){console.log(c)}if(r){const t="text/csv",i=document.createElement("a"),s=r,n=new Blob([s],{type:t}),o=URL.createObjectURL(n),c=`${this.item.name||"*NoName*"}[${a["a"].formatDate(e.from,"DD.MM.YYYY HH-mm-ss")}-${a["a"].formatDate(e.to,"DD.MM.YYYY HH-mm-ss")}].csv`;i.setAttribute("href",o),i.setAttribute("download",c),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}this.isFileCsvLoading=!1}}}},"0860":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("iframe",{ref:"frame",staticClass:"absolute-top-left absolute-bottom-right",staticStyle:{width:"100%",height:"100%"},attrs:{src:e.link,frameborder:"0"}})},a=[],n=i("ded3"),o=i.n(n),r=i("42454"),c=i.n(r),l={name:"map-frame",data(){return{link:"https://flespi.io/mapview",lastCommand:{},mapInited:!1}},methods:{centerMap(e){return this.lastCommand.centermap=e,this},autobounds(e){return this.lastCommand.autobounds=e,this},addConfig(e){this.lastCommand=c()({},this.lastCommand,e)},addMarkers(e){return this.lastCommand.addmarkers=e,this},addNamedMarkers(e){return this.lastCommand.namedmarkers=e,this},addNamedMarker(e){return this.lastCommand.namedmarkers=o()(o()({},this.lastCommand.namedmarkers),e),this},addPoints(e){return this.lastCommand.appendpoints=e,this},addRoutes(e){return this.lastCommand.addgroutes=e,this},clear(e="all"){return this.lastCommand.clear=e,this},send(){return this.$refs.frame&&this.mapInited&&(this.$refs.frame.contentWindow.postMessage(`MapView|cmd:${JSON.stringify(this.lastCommand)}`,"*"),this.lastCommand={}),this}},created(){const e=t=>{'MapView|state:{"ready": true}'===t.data&&(this.mapInited=!0,this.$refs.frame.contentWindow.postMessage('MapView|cmd:{"ruler": true, "zoomcontrol": true}',"*"),this.send(),window.removeEventListener("message",e))};window.addEventListener("message",e)}},d=l,m=i("2877"),h=Object(m["a"])(d,s,a,!1,null,null,null);t["a"]=h.exports},"0dc4":function(e,t,i){"use strict";i("83a1")},"121a":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"empty-state__back"},[i("div",{staticClass:"text-center text-grey-4",class:["q-pb-"+(e.$q.platform.is.mobile?"sm":"lg"),e.$q.platform.is.mobile?"":"q-pt-lg"],staticStyle:{"font-size":"1.5rem"}},[e._v(e._s(e.config.label))]),e.$q.platform.is.desktop?i("div",{staticClass:"row text-white q-px-md q-mb-md justify-center"},[i("div",{staticClass:"text-grey-4 col-12 q-px-sm",staticStyle:{"font-size":".9rem"}},[e._v(e._s(e.config.sublabel))]),e._l(e.config.hints,(function(t,s){return i("div",{key:s,staticClass:"q-pa-sm",class:t.wclass||["col-6","col-sm-3"]},[i("div",{staticClass:"empty-state__card full-height",domProps:{innerHTML:e._s(t.html)}})])}))],2):[i("q-dialog",{model:{value:e.dialogModel,callback:function(t){e.dialogModel=t},expression:"dialogModel"}},[i("div",{staticClass:"row text-white q-pa-md bg-grey-9"},[i("div",{staticClass:"text-grey-4 col-12 q-px-sm",staticStyle:{"font-size":".9rem"}},[e._v(e._s(e.config.sublabel))]),e._l(e.config.hints,(function(t,s){return i("div",{key:s,staticClass:"q-pa-sm",class:t.wclass||["col-6","col-sm-3"]},[i("div",{staticClass:"empty-state__card full-height",domProps:{innerHTML:e._s(t.html)}})])}))],2)]),i("div",{staticClass:"text-center q-mb-sm"},[i("q-btn",{attrs:{label:"Details",dense:"",color:"white",flat:""},on:{click:function(t){e.dialogModel=!0}}})],1)],i("div",{staticClass:"text-center"},[i("q-btn",{attrs:{type:"a",label:"More about Toolbox",href:"https://flespi.com/blog/drive-telematics-diagnostics-beyond-ordinary-with-flespi-toolbox",target:"_blank",dense:"",flat:e.$q.platform.is.mobile,color:"red",size:".8rem"}})],1),e._t("after")],2)},a=[],n={name:"EmptyPane",props:["config"],data(){return{dialogModel:!1}}},o=n,r=(i("cc73"),i("2877")),c=i("24e8"),l=i("9c40"),d=i("eebe"),m=i.n(d),h=Object(r["a"])(o,s,a,!1,null,null,null);t["a"]=h.exports;m()(h,"components",{QDialog:c["a"],QBtn:l["a"]})},"286e":function(e,t,i){"use strict";var s=i("ded3"),a=i.n(s),n=i("2f62"),o=i("9b02"),r=i.n(o);const c={};function l(e,t,i,s,a){let n;return s?t?n={entity:e,id:t,mode:1}:i&&(n={entity:e,id:i,mode:1}):n={entity:e,id:t,mode:1},!!n&&a.push(n)}t["a"]={beforeRouteEnter(e,t,i){const s=e.meta.moduleName;let a=t.meta.moduleName;i((i=>{if(s!==a||!a){let n=s;const o=[];if(n){const s=e.params&&e.params.id?JSON.parse(e.params.id):null,d=r()(i.settings,`entities[${n}]`,void 0);switch(n){case"devices":"intervals"===a&&(a="devices"),s&&o.push({entity:"tasks",id:{device:s},mode:1}),n!==a&&l(n,s,d,i.isNeedSelect,o);break;case"calcs":"intervals"===a&&(a="calcs"),s&&o.push({entity:"tasks",id:{calc:s},mode:1}),n!==a&&l(n,s,d,i.isNeedSelect,o);break;case"intervals":{const s=e.params&&e.params.deviceId?JSON.parse(e.params.deviceId):null,r=e.params&&e.params.calcId?JSON.parse(e.params.calcId):null,d=t.params&&t.params.id?JSON.parse(t.params.id):null;"devices"===a?(i.isCalcsInit=l("calcs",r,void 0,i.isNeedSelect||"string"===typeof i.isNeedSelect&&!i.isNeedSelect.indexOf("calcs"),o),i.isDevicesInit=c.devices&&!c.devices.id,i.deviceBlocked=!0,i.setToolboxSessionSettings({intervalDevicesBlocked:!0}),n="devices",d!==s&&o.push({entity:"tasks",id:{device:s,calc:r},mode:1})):"calcs"===a?(i.isDevicesInit=l("devices",s,void 0,i.isNeedSelect||"string"===typeof i.isNeedSelect&&!i.isNeedSelect.indexOf("devices"),o),i.isCalcsInit=c.calcs&&!c.calcs.id,i.calcsBlocked=!0,i.setToolboxSessionSettings({intervalCalcsBlocked:!0}),n="calcs",d!==r&&o.push({entity:"tasks",id:{device:s,calc:r},mode:1})):(i.deviceBlocked=!0,i.calcsBlocked=!0,i.setToolboxSessionSettings({intervalDevicesBlocked:!0,intervalCalcsBlocked:!0}),o.push({entity:"tasks",id:{device:s,calc:r},mode:1}),i.isCalcsInit=l("calcs",r,void 0,i.isNeedSelect||"string"===typeof i.isNeedSelect&&!i.isNeedSelect.indexOf("calcs"),o),i.isDevicesInit=l("devices",s,void 0,i.isNeedSelect||"string"===typeof i.isNeedSelect&&!i.isNeedSelect.indexOf("devices"),o));break}case"trafficViewer":case"hexViewer":n="channels",n!==a&&l(n,s,d,i.isNeedSelect,o);break;case"channels":a="hexViewer"===a||"trafficViewer"===a?"channels":a,n!==a&&l(n,s,d,i.isNeedSelect,o);break;case"platform":if(n="subaccounts","mqtt"===a)break;l(n,s,d,i.isNeedSelect,o);break;case"mqtt":if(n="subaccounts","platform"===a)break;l(n,s,d,i.isNeedSelect,o);break;default:l(n,s,d,i.isNeedSelect,o)}}o.forEach((e=>{c[e.entity]=e})),c[n]&&!c[n].id&&(i.isItemsInit=!0),i.getEntities(o).then((()=>{i.init&&i.init()}))}}))},beforeRouteUpdate(e,t,i){const s=e.meta.moduleName,a=t.meta.moduleName,n=e.params&&e.params.id?JSON.parse(e.params.id):null,o=t.params&&t.params.id?JSON.parse(t.params.id):null,r=[],l=[];if(s===a){if(n)switch(s){case"devices":l.push({entity:"tasks",id:{device:n},mode:1});break;case"calcs":l.push({entity:"tasks",id:{calc:n},mode:1});break}if(o)switch(s){case"devices":r.push({entity:"tasks",id:{device:o},mode:1});break;case"calcs":r.push({entity:"tasks",id:{calc:o},mode:1});break}}r.forEach((e=>{delete c[e.entity]})),l.forEach((e=>{c[e.entity]=e})),this.removeEntities(r).then((()=>{this.getEntities(l)})).then(i)},beforeRouteLeave(e,t,i){let s=t.meta.moduleName,a=e.meta.moduleName;const n=[];if(s&&a!==s){const e=t.params&&t.params.id?JSON.parse(t.params.id):null;switch(s){case"devices":"intervals"===a&&(a="devices"),a!==s&&(n.push({entity:"tasks",id:{device:e},mode:1}),n.push(this.isNeedSelect&&this.isItemsInit?{entity:s,mode:1}:{entity:s,id:e,mode:1}));break;case"calcs":"intervals"===a&&(a="calcs"),a!==s&&n.push(this.isNeedSelect&&this.isItemsInit?{entity:s,mode:1}:{entity:s,id:e,mode:1});break;case"intervals":{const e=t.params&&t.params.deviceId?JSON.parse(t.params.deviceId):null,i=t.params&&t.params.calcId?JSON.parse(t.params.calcId):null;"devices"===a?n.push((this.isNeedSelect||"string"===typeof this.isNeedSelect&&!this.isNeedSelect.indexOf("calcs"))&&this.isCalcsInit?{entity:"calcs",mode:1}:{entity:"calcs",id:i,mode:1}):("calcs"===a||n.push((this.isNeedSelect||"string"===typeof this.isNeedSelect&&!this.isNeedSelect.indexOf("calcs"))&&this.isCalcsInit?{entity:"calcs",mode:1}:{entity:"calcs",id:i,mode:1}),n.push((this.isNeedSelect||"string"===typeof this.isNeedSelect&&!this.isNeedSelect.indexOf("devices"))&&this.isDevicesInit?{entity:"devices",mode:1}:{entity:"devices",id:e,mode:1})),n.push(c.tasks);break}case"trafficViewer":case"hexViewer":s="channels",s!==a&&n.push(this.isNeedSelect&&this.isItemsInit?{entity:s,mode:1}:{entity:s,id:e,mode:1});break;case"platform":if(s="subaccounts","mqtt"===a)break;n.push(this.isNeedSelect&&this.isItemsInit?{entity:s,mode:1}:{entity:s,id:e,mode:1});break;case"mqtt":if(s="subaccounts","platform"===a)break;n.push(this.isNeedSelect&&this.isItemsInit?{entity:s,mode:1}:{entity:s,id:e,mode:1});break;default:n.push(this.isNeedSelect&&this.isItemsInit?{entity:s,mode:1}:{entity:s,id:e,mode:1})}}return n.forEach((e=>{delete c[e.entity]})),this.removeEntities(n).then((()=>{i()}))},methods:a()(a()({},Object(n["b"])(["getEntities","removeEntities","unsubscribeItems"])),{},{itemsLoad(e,t,i,s){return this.getEntities([{entity:e,mode:1}]).then((a=>{i&&this.unsubscribeItems({entity:e,id:i,mode:1}),t&&t(),c[e]={entity:e,mode:1},s&&s()}))},filterItems(e,t,i){this.isItemsInitStart&&!this.isItemsInit||(this.isItemsInit?i():(this.isItemsInitStart=!0,this.itemsLoad(e,i,this.active,(()=>{this.isItemsInit=!0}))))}})}},"2ce0":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("virtual-scroll-list",{ref:"scrollList",attrs:{cols:e.cols,actions:e.actions,items:e.messages,dateRange:e.dateRange,viewConfig:e.viewConfig,i18n:e.i18n,filter:e.filter,theme:e.theme,title:"Logs",loading:e.loadingFlag,autoscroll:e.needAutoscroll,scrollOffset:"10%",item:e.listItem,itemprops:e.getItemsProps,"has-new-messages":e.hasNewMessages},on:{action:e.actionHandler,"change-filter":e.filterChangeHandler,"scroll-top":e.paginationPrevChangeHandler,"scroll-bottom":e.paginationNextChangeHandler,"change-date-range":e.dateRangeChangeHandler,"action-to-bottom":e.actionToBottomHandler,"action-to-new-messages":e.actionToNewMessages,"action-to-new-messages-hide":e.actionToNewMessagesHide,"update-cols":e.updateColsHandler}},[i("empty-pane",{attrs:{slot:"empty",config:e.config.emptyState},slot:"empty"}),i("logs-filter-menu",{attrs:{slot:"filter-append",filter:e.filter,entity:e.entityName},on:{update:e.filterChangeHandler},slot:"filter-append"})],1)],1)},a=[],n=i("ded3"),o=i.n(n),r=(i("26e9"),i("5319"),i("bd4c")),c=i("cdde"),l=i("de45"),d=(i("13d5"),i("839d")),m={methods:{getLogItemColor(e,t,i){switch(i=i||(this.item?this.item.send_code:0),t=t||(this.item?this.item.close_code:0),e){case 1:case 100:case 101:case 110:case 200:case 202:case 300:case 312:case 330:case 401:case 410:case 420:case 430:case 500:case 510:case 601:case 605:return"green";case 2:case 3:case 4:case 21:case 111:case 112:case 302:case 303:case 311:case 314:case 315:case 321:case 331:case 332:case 333:case 411:case 412:case 502:case 504:case 511:case 600:case 603:case 604:case 900:return"yellow";case 113:case 115:case 317:case 310:case 320:case 334:case 404:case 422:case 432:case 503:case 512:case 520:case 521:case 602:case 700:case 800:return"grey-6";case 20:case 103:case 114:case 203:case 204:case 304:case 313:case 316:case 322:case 402:case 403:case 501:return"red";case 201:return i<0?"red":"green";case 301:case 102:switch(t){case 3:return"green";case 2:case 12:case 15:case 16:return"grey-6";case 4:case 5:case 6:case 11:case 13:case 14:return"red";case 7:case 8:case 9:case 10:return"yellow";default:return"grey-6"}default:return"grey-6"}},getLogDescriptionByItem(e){const t=d.types,i=d.closeCodes,s=d.errorCodes,a=d.sendCodes,n=d.blockedCodes;let o=t[e.event_code]?`${t[e.event_code]}`:e.event_code;return e.close_code&&(o+=i[e.close_code]?` (${i[e.close_code]})`:` (close: ${e.close_code})`),e.error_code&&(o+=s[e.event_code]&&s[e.event_code][e.error_code]?` (${s[e.event_code][e.error_code]})`:` (error: ${e.error_code})`),e.send_code&&(o+=a[e.send_code]?` (${a[e.send_code]})`:` (send: ${e.send_code})`),e.blocked&&(o+=n[e.blocked]?` (${n[e.blocked]})`:` (blocked: ${e.blocked})`),o},getLogClearItem(e){return Object.keys(e).reduce(((t,i)=>(-1!==i.indexOf("x-flespi")||(t[i]=e[i]),t)),{})},getLogValueOfProp(e,t){let i=e.custom?JSON.stringify(t[e.name]):t[e.name];return"event_code"===e.name?i=this.getLogDescriptionByItem(t):"timestamp"===e.name?i=r["a"].formatDate(1e3*t[e.name],"DD/MM/YYYY HH:mm:ss"):"host"===e.name&&(i=t.host||t.source||""),i}}},h=i("2b0e"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{height:e.itemHeight+"px",width:e.rowWidth+"px"},on:{click:function(t){return e.itemClickHandler(e.index,e.clearItem)}}},[i("div",{staticClass:"cursor-pointer",class:[e.color,e.item["x-flespi-status"]?"missed-items":"",e.selected?"bg-white-opasity-3":""],style:{height:e.itemHeight+"px",width:e.rowWidth+"px",boxSizing:"border-box"}},[e._l(e.cols,(function(t,s){var a,n;return["etc"===t.__dest?i("span",{key:t.name+s,staticClass:"list__item item_etc",class:(a={},a["item_"+s]=!0,a["item--active"]=e.menuCellActive&&e.menuCellActive.row===e.index&&e.menuCellActive.col===s,a)},[e._v(e._s(e.etc))]):i("span",{key:t.name+s,staticClass:"list__item",class:(n={},n["item_"+s]=!0,n["item--active"]=e.menuCellActive&&e.menuCellActive.row===e.index&&e.menuCellActive.col===s,n)},["event_code"===t.name&&e.item.address?["connection"===e.item.address?i("q-icon",{attrs:{name:"mdi-ethernet",title:"address: connection"}}):e._e(),"sms"===e.item.address?i("q-icon",{attrs:{name:"mdi-email-outline",title:"address: sms"}}):e._e(),"local"===e.item.address?i("q-icon",{attrs:{name:"mdi-content-save-outline",title:"address: local"}}):e._e()]:e._e(),"event_code"===t.name&&e.item["error_text"]&&e.needTrafficRoute?i("q-icon",{staticStyle:{float:"right","margin-top":"3px"},attrs:{name:"mdi-download-network-outline",color:"white"},nativeOn:{click:function(t){return t.stopPropagation(),e.clickHandler(e.index,"traffic",e.clearItem)}}},[i("q-tooltip",[e._v("Show in traffic viewer")])],1):e._e(),"event_code"===t.name&&e.item["error_text"]?i("q-icon",{attrs:{name:"mdi-alert-outline"}},[i("q-tooltip",[i("pre",{staticClass:"q-ma-none"},[e._v(e._s(e.item["error_text"]))])])],1):e._e(),"event_code"===t.name&&e.isErrorType&&e.isIntegration?i("q-icon",{attrs:{name:"mdi-bug"},nativeOn:{click:function(t){return t.stopPropagation(),e.clickHandler(e.index,"error-report",e.clearItem)}}},[i("q-tooltip",[e._v("Report error to chat")])],1):e._e(),901===e.item.event_code&&"name"===t.name?i("a",{staticClass:"text-green",attrs:{target:"_blank",href:e.$flespiCDN+"/file/"+e.item.uuid},on:{click:function(e){e.stopPropagation()}}},[e._v("\n          "+e._s(e.getLogValueOfProp(t,e.item))+"\n        ")]):i("span",{attrs:{title:JSON.stringify(e.getLogValueOfProp(t,e.item))}},[e._v("\n          "+e._s(e.getLogValueOfProp(t,e.item))+"\n        ")])],2)]}))],2)])},u=[],g=i("b06b"),f={props:["item","index","actions","cols","itemHeight","selected","rowWidth","itemSettings","menuCellActive"],mixins:[m],data(){return{date:r["a"],needTrafficRoute:this.itemSettings&&this.itemSettings.needTrafficRoute,isIntegration:this.$q.platform.within.iframe}},computed:{etc(){const e=Object.keys(this.item).filter((e=>!this.hasInCols(e)));return e.reduce(((e,t)=>("event_origin"===t||"event_text"===t||"item_data"===t||"source"===t||"error_text"===t||"close_code"===t||"code"===t||"http_data"===t||"current"===t||"updated"===t||"error_code"===t||"send_code"===t||"address"===t||-1!==t.indexOf("x-flespi")||"uuid"===t||(e+=`${t}: ${JSON.stringify(this.item[t])}; `),e)),"")||"*Empty*"},color(){return`text-${this.getLogItemColor(this.item.event_code)}`},isErrorType(){return"text-red"===this.color},eventLinkMore(){const e=this.$flespiServer;switch(this.item.event_code){case 1:case 2:case 3:return`${e}/docs/#/platform`;case 20:case 21:return`${e}/docs/#/platform/!/counters`;case 100:case 101:case 102:return`${e}/docs/#/gw/!/connections`;case 110:case 111:case 112:case 113:return`${e}/docs/#/gw/!/commands`;case 103:case 114:return`${e}/docs/#/gw/!/channels`;case 200:case 201:case 202:case 203:case 204:return`${e}/docs/#/gw/!/modems`;case 300:case 301:case 302:case 303:case 304:case 310:case 311:case 312:case 313:case 314:case 315:case 316:case 317:case 320:case 321:case 322:return`${e}/docs/#/gw/!/devices`;case 401:case 402:case 403:case 404:case 410:case 411:case 412:case 420:case 422:case 430:case 432:return`${e}/docs/#/gw/!/streams`;case 500:case 501:case 502:case 503:case 504:case 510:case 511:case 512:return`${e}/docs/#/mqtt/!/sessions`;case 600:return`${e}/docs/#/platform/!/tokens`;case 601:case 602:case 603:case 604:case 605:return`${e}/docs/#/gw/!/calcs`;case 700:return`${e}/docs/#/storage/!/containers`;case 800:return`${e}/docs/#/storage/!/abques`;case 900:return`${e}/docs/#/storage/!/cdns`;default:return""}},description(){return this.getLogDescriptionByItem(this.item)},clearItem(){return this.getLogClearItem(this.item)}},methods:{hasInCols(e){return!!this.cols.filter((t=>e===t.name)).length},clickHandler(e,t,i){this.$emit("action",{index:e,type:t,content:i})},linkMoreClickHandler(){Object(g["a"])(this.eventLinkMore)},itemClickHandler(e,t){t["x-flespi-description"]=`<div style="font-size: 1.1rem">${t.event_code}: ${this.getLogDescriptionByItem(t)}</div><div style="font-size: .9rem">${r["a"].formatDate(1e3*t.timestamp,"DD/MM/YYYY HH:mm:ss")}</div>`,t["x-flespi-color"]=`text-${this.getLogItemColor(t.event_code)}`,this.$emit("item-click",{index:e,content:t})}}},v=f,b=(i("0dc4"),i("2877")),w=i("05c0"),y=i("0016"),x=i("eebe"),$=i.n(x),_=Object(b["a"])(v,p,u,!1,null,"51354ca1",null),M=_.exports;$()(_,"components",{QTooltip:w["a"],QIcon:y["a"]});var S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-btn",{attrs:{color:"white",icon:"mdi-filter-variant",flat:"",dense:"",rounded:""}},[i("q-tooltip",[e._v("Filter by event type")]),i("q-menu",{attrs:{anchor:"top right",self:"top right","content-class":"bg-grey-9"}},[i("div",{staticClass:"q-py-sm",staticStyle:{"max-width":"400px","max-height":"calc(50vh - 50px)"}},[i("div",{staticClass:"text-white text-weight-bold q-ml-sm"},[e._v("Basic")]),e._l(e.baseOptions,(function(t){return i("div",{key:t.value,staticClass:"filter-menu__item q-pl-sm cursor-pointer",on:{click:function(i){return e.add("event_code",t.value)}}},[i("span",{class:["text-"+e.getLogItemColor(t.value)]},[e._v(e._s(t.label))])])})),e.entityOptions.length?i("div",[i("div",{staticClass:"text-white text-weight-bold q-mt-xs q-ml-sm"},[e._v("Specific for "+e._s(e.entity))]),e._l(e.entityOptions,(function(t){return[i("div",{key:t.value,staticClass:"filter-menu__item q-pl-sm cursor-pointer",on:{click:function(i){return e.add("event_code",t.value)}}},[i("span",{class:["text-"+e.getLogItemColor(t.value)]},[e._v(e._s(t.label))])]),102===t.value||301===t.value?i("div",{key:t.value+"close"},e._l(e.closeCodes,(function(s,a){return i("div",{key:s,staticClass:"filter-menu__item q-pl-lg cursor-pointer",on:{click:function(i){return e.addComplex("event_code",t.value,"close_code",a)}}},[i("span",{class:["text-"+e.getLogItemColor(t.value,+a)]},[e._v(e._s(s))])])})),0):e._e()]}))],2):e._e()],2)])],1)},k=[];const C=d.codesByEntities.base,N=d.types,q={2:"connection closed by tracking device",3:"connection successfully processed and closed",4:"received data violates channel's protocol",5:"internal error",6:"data parsing error",7:"connection closed due to server maintenance",8:"protocol implementation updated",9:"channel's parameters changed",10:"connection closed upon user's request",11:"outgoing connection failed",12:"current connection closed because of ident collision",13:"device is blocked",14:"authentication failed",15:"device associated with the connection was created, changed or deleted",16:"channel rejected connection due to IP addresses whitelist mismatch"};var I={props:["filter","entity"],mixins:[m],data(){const e=d.codesByEntities[this.entity];return{baseEvents:C,entityEvents:e,baseOptions:C.map((e=>({label:N[e],value:e}))),entityOptions:e.map((e=>({label:N[e],value:e}))),closeCodes:q}},methods:{add(e,t){const i=this.filter?`(${this.filter})||${e}==${t}`:`${e}==${t}`;this.$emit("update",i)},addComplex(e,t,i,s){const a=`${e}==${t}&&${i}==${s}`,n=this.filter?`(${this.filter})||(${a})`:a;this.$emit("update",n)}}},z=I,H=(i("2db3"),i("9c40")),O=i("4e73"),T=Object(b["a"])(z,S,k,!1,null,"35c898be",null),L=T.exports;$()(T,"components",{QBtn:H["a"],QTooltip:w["a"],QMenu:O["a"]});var A=i("121a"),E={props:["item","cid","limit","originPattern","config","entityName"],data(){return{listItem:M,theme:this.config.theme,itemSettings:this.config.itemSettings,i18n:{"Messages not found":"Log entries not found"},viewConfig:this.config.viewConfig,actions:this.config.actions,moduleName:this.config.vuexModuleName,autoscroll:!0}},computed:{messages:{get(){return this.$store.state[this.moduleName].messages},set(e){this.$store.commit(`${this.moduleName}/setMessages`,e)}},origin:{async set(e){await this.$store.dispatch(`${this.moduleName}/unsubscribePooling`),this.$store.commit(`${this.moduleName}/setOrigin`,e),this.$store.commit(`${this.moduleName}/setItemDeletedStatus`,this.item&&this.item.deleted),this.$store.commit(`${this.moduleName}/clearMessages`),this.$store.dispatch(`${this.moduleName}/getCols`,this.config.cols),await this.$store.dispatch(`${this.moduleName}/initTime`),await this.getMessages()},get(){return this.$store.state[this.moduleName].origin}},cols:{get(){return this.$store.state[this.moduleName].cols},set(e){this.$store.commit(`${this.moduleName}/updateCols`,e)}},filter:{get(){return this.$store.state[this.moduleName].filter},set(e){e=e||"",this.$store.commit(`${this.moduleName}/setFilter`,e)}},dateRange(){return[this.$store.state[this.moduleName].from,this.$store.state[this.moduleName].to]},from:{get(){return this.$store.state[this.moduleName].from},set(e){e=e||0,this.$store.commit(`${this.moduleName}/setFrom`,e)}},to:{get(){return this.$store.state[this.moduleName].to},set(e){e=e||0,this.$store.commit(`${this.moduleName}/setTo`,e)}},reverse:{get(){return this.$store.state[this.moduleName].reverse||!1},set(e){this.$store.commit(`${this.moduleName}/setReverse`,e)}},selected:{get(){return this.$store.state[this.moduleName].selected},set(e){e&&e.length&&(this.autoscroll=!1),this.$store.commit(`${this.moduleName}/setSelected`,e)}},realtimeEnabled(){return this.$store.state[this.moduleName].realtimeEnabled},currentLimit:{get(){return this.$store.state[this.moduleName].limit},set(e){e=e||1e3,this.$store.commit(`${this.moduleName}/setLimit`,e)}},hasNewMessages:{get(){return this.$store.state[this.moduleName].hasNewMessages},set(e){this.$store.state[this.moduleName].hasNewMessages=e}},originByPattern(){return this.item?this.originPattern.replace(/\/:(\w*)(\/)?/g,((e,t,i)=>`/${this.item[t]}${i||""}`)):""},loadingFlag(){const e=this.$store.state;return!(!e[this.config.vuexModuleName]||!e[this.config.vuexModuleName].isLoading)},needAutoscroll(){return this.realtimeEnabled&&!this.selected.length&&this.autoscroll}},methods:{getItemsProps(e,t){const i=this.messages[e];t.key=i["x-flespi-message-key"],t.props.etcVisible=this.etcVisible,t.props.actionsVisible=this.actionsVisible,t.props.itemSettings=this.itemSettings,t.props.selected=this.selected.includes(e),t.on||(t.on={}),t.on.action=this.actionHandler,t.on["item-click"]=this.viewMessagesHandler,t.dataHandler=(e,t,i)=>(this.autoscroll=!1,this.getLogValueOfProp(e.data,t.data))},async getMessages(){this.to<=Date.now()?await this.$store.dispatch(`${this.moduleName}/get`):(await this.$store.dispatch(`${this.moduleName}/getHistory`,1e3),this.scrollTo(this.messages.length-1))},scrollTo(e){this.$nextTick((()=>this.$refs.scrollList&&this.$refs.scrollList.scrollTo(e)))},scrollToWithSavePadding(e){this.$nextTick((()=>this.$refs.scrollList&&this.$refs.scrollList.scrollToWithSavePadding(e)))},resetParams(){this.$refs.scrollList.resetParams()},filterChangeHandler(e){this.filter!==e&&(this.realtimeEnabled&&this.$store.dispatch(`${this.moduleName}/unsubscribePooling`),this.filter=e,this.$store.commit(`${this.moduleName}/clearMessages`),this.getMessages())},updateColsHandler(e){this.cols=e},dateRangeChangeHandler(e){const t=e[0],i=e[1];if(this.from===t&&this.to===i)return!1;this.from=t,this.to=i,this.$store.commit(`${this.moduleName}/clearMessages`),this.$store.dispatch(`${this.moduleName}/get`).then((()=>this.scrollTo(0)))},paginationPrevChangeHandler(){this.$store.dispatch(`${this.moduleName}/getPrevPage`).then((e=>{e&&"number"===typeof e&&this.scrollToWithSavePadding(e)}))},paginationNextChangeHandler(){this.$store.dispatch(`${this.moduleName}/getNextPage`).then((e=>{this.autoscroll=!0,e&&"number"===typeof e&&this.scrollTo(this.messages.length-e)}))},actionHandler({index:e,type:t,content:i}){switch(this.selected=[e],t){case"view":this.viewMessagesHandler({index:e,content:i});break;case"copy":this.copyMessageHandler({index:e,content:i});break;case"traffic":this.$emit("to-traffic",{index:e,content:i});break;case"error-report":{const e=Math.floor(i.timestamp);let t=e-10,s=e+2,a=`${window.location.href}`;"devices"===this.entityName&&(t=e-120,s=e+2,a+=`?from=${t}&to=${s}`),"channels"===this.entityName&&i.ident&&(t=e-120,s=e+2,a+=`?from=${t}&to=${s}&messages=${encodeURI(JSON.stringify({filter:`ident="${i.ident}"`}))}`),this.$integrationBus.send("errorReport",{data:i,description:this.getLogDescriptionByItem(i),type:"log",entity:{type:this.entityName,id:this.item.id},url:a});break}}},copyMessageHandler({index:e,content:t}){Object(c["a"])(JSON.stringify(t)).then((e=>{this.$q.notify({type:"positive",icon:"content_copy",message:"Log object copied",timeout:1e3})}),(e=>{this.$q.notify({type:"negative",icon:"content_copy",message:"Error coping log",timeout:1e3})}))},actionToBottomHandler(){this.realtimeEnabled?(this.autoscroll=!0,this.scrollTo(this.messages.length-1)):this.$store.dispatch(`${this.moduleName}/getHistory`,1e3).then((()=>{this.scrollTo(this.messages.length-1)}))},async actionToNewMessages(){this.hasNewMessages=null;const e=Date.now(),t=new Date(e).setHours(0,0,0,0),i=t+86399999;this.from=t,this.to=i,this.$store.commit(`${this.moduleName}/clearMessages`),this.getMessages()},actionToNewMessagesHide(){this.hasNewMessages=null},viewMessagesHandler({index:e,content:t}){this.selected=[e],this.$emit("view-log-message",t)},async changeCid(){await this.$store.dispatch(`${this.moduleName}/unsubscribePooling`),this.$store.commit(`${this.moduleName}/setCid`,this.cid),this.$store.commit(`${this.moduleName}/setItemDeletedStatus`,this.item.deleted),this.$store.commit(`${this.moduleName}/clearMessages`),this.$store.dispatch(`${this.moduleName}/getCols`,this.config.cols),await this.$store.dispatch(`${this.moduleName}/initTime`),await this.$store.dispatch(`${this.moduleName}/get`)},unselect(){this.selected.length&&(this.selected=[])},nextSelect(){if(this.selected.length){const e=this.selected.slice(-1)[0],t=e+1;this.processSelected(t)}},prevSelect(){if(this.selected.length){const e=this.selected[0],t=e-1;this.processSelected(t)}},processSelected(e){const t=this.messages[e];if(t){this.selected=[e];const i=o()({},this.getLogClearItem(t));i["x-flespi-description"]=`<div style="font-size: 1.1rem">${i.event_code}: ${this.getLogDescriptionByItem(i)}</div><div style="font-size: .9rem">${r["a"].formatDate(1e3*i.timestamp,"DD/MM/YYYY HH:mm:ss")}</div>`,i["x-flespi-color"]=`text-${this.getLogItemColor(i.event_code,i.close_code,i.send_code)}`,this.$emit("action-select",{index:e,content:i}),this.scrollTo(e)}},async init(){if(this.$store.state[this.moduleName]?this.$store.commit(`${this.moduleName}/clear`):this.$store.registerModule(this.moduleName,Object(l["f"])({Vue:h["default"],LocalStorage:this.$q.localStorage,name:{name:this.moduleName,lsNamespace:"flespi-toolbox-settings.cols"},errorHandler:e=>{this.$store.commit("reqFailed",e)}})),this.currentLimit=this.limit,this.cid&&this.$store.commit(`${this.moduleName}/setCid`,this.cid),this.item){let t=Math.floor(1e3*this.$route.query.from),i=Math.floor(1e3*this.$route.query.to),s=this.$route.query.logs;if(s)try{s=JSON.parse(s),s.filter&&(this.filter=s.filter),s.from&&s.to&&(t=Math.floor(1e3*s.from),i=Math.floor(1e3*s.to))}catch(e){}this.$store.commit(`${this.moduleName}/setOrigin`,this.originByPattern),this.$store.commit(`${this.moduleName}/setItemDeletedStatus`,this.item&&this.item.deleted),await this.$store.dispatch(`${this.moduleName}/getCols`,this.config.cols),t&&i?(this.from=t,this.to=i,await this.getMessages()):(await this.$store.dispatch(`${this.moduleName}/initTime`),await this.getMessages())}}},watch:{item(e,t){(!t||t&&e.id!==t.id)&&(this.origin=this.originByPattern)},limit(e){this.currentLimit=e},cid(){this.changeCid()}},created(){this.init(),this.offlineHandler=h["default"].connector.socket.on("offline",(()=>{this.$store.commit(`${this.moduleName}/setOffline`)})),this.connectHandler=h["default"].connector.socket.on("connect",(()=>{this.$store.state[this.moduleName].offline&&(this.$store.commit(`${this.moduleName}/setReconnected`),this.realtimeEnabled&&this.$store.dispatch(`${this.moduleName}/getMissedMessages`),this.$store.commit(`${this.moduleName}/clearOfflineState`))}))},beforeDestroy(){this.$store.dispatch(`${this.moduleName}/unsubscribePooling`),void 0!==this.offlineHandler&&h["default"].connector.socket.off("offline",this.offlineHandler),void 0!==this.connectHandler&&h["default"].connector.socket.off("connect",this.connectHandler),this.$store.commit(`${this.moduleName}/clear`)},mixins:[m],components:{VirtualScrollList:l["b"],EmptyPane:A["a"],LogsFilterMenu:L}},j=E,D=Object(b["a"])(j,s,a,!1,null,null,null);t["a"]=D.exports},"2db3":function(e,t,i){"use strict";i("d728a")},"39af":function(e,t,i){},"3a57":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("span",{class:{"text-white":void 0!==e.inverted}},[e._v(e._s(Array.isArray(e.data)?"[":"{"))]),e._l(e.data,(function(t,s,a){var n;return i("div",{key:s+"-"+a,staticClass:"margin-left"},[t&&"object"===typeof t?i("div",[i("div",{staticClass:"cursor-pointer",on:{click:function(t){e.toggle(Array.isArray(e.data)?s:a)}}},[i("span",{class:[e.theme.label]},[e._v(e._s(s))]),i("span",{class:{"text-white":void 0!==e.inverted}},[e._v(" : "+e._s(Array.isArray(t)?"Array ["+t.length+"]":"Object"))]),e.showObj[Array.isArray(e.data)?s:a]?i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==e.inverted?"white":"grey-9",name:"mdi-menu-down"}}):i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==e.inverted?"white":"grey-9",name:"mdi-menu-right"}})],1),e.showObj[Array.isArray(e.data)?s:a]?i("json-tree",{staticClass:"margin-left",attrs:{data:t,inverted:e.inverted}}):e._e()],1):i("div",[i("span",{class:[e.theme.label]},[e._v(e._s(s))]),i("span",{class:{"text-white":void 0!==e.inverted}},[e._v(" : ")]),i("pre",{staticClass:"json-tree__field-value",class:(n={},n[e.theme.typeNumberOrBool]="number"===typeof t||"boolean"===typeof t,n[e.theme.typeString]="string"===typeof t,n[e.theme.typeEmpty]="undefined"===typeof t||null===t,n)},[e._v(e._s(JSON.stringify(t)))])])])})),i("span",{class:{"text-white":void 0!==e.inverted}},[e._v(e._s(Array.isArray(e.data)?"]":"}"))])],2)},a=[],n=i("2b0e"),o={name:"json-tree",props:{data:[Object,Array],inverted:{type:Boolean,default(){return!0}}},data(){const e=[],t=Object.keys(this.data).length;for(let i=0,s=t;i<s;i++)e.push(!0);return{showObj:e}},computed:{theme(){return void 0!==this.inverted?{label:"text-pink-4",typeString:"text-red-3",typeNumberOrBool:"text-blue-3",typeEmpty:"text-grey-5"}:{label:"text-pink-8",typeString:"text-red-6",typeNumberOrBool:"text-blue-6",typeEmpty:"text-grey-6"}}},methods:{toggle(e){n["default"].set(this.showObj,e,!this.showObj[e])}}},r=o,c=(i("739a"),i("2877")),l=i("0016"),d=i("eebe"),m=i.n(d),h=Object(c["a"])(r,s,a,!1,null,null,null);t["a"]=h.exports;m()(h,"components",{QIcon:l["a"]})},4596:function(e,t,i){"use strict";var s=i("bd4c"),a=i("3a57");t["a"]={data(){return{isWidgetsLogsActive:!1,widgetsViewedLog:null}},computed:{logsWidgetsViewConfig(){const e=this.widgetsViewedLog;let t={};return e&&(t={"log object":{title:"log object",description:e["x-flespi-description"],wrapper:a["a"],data:e}},e.item_data&&(t.item_data={title:"item data",wrapper:a["a"],data:e.item_data}),e.http_data&&(t.http_data={title:"http data",wrapper:a["a"],data:e.http_data}),e.properties&&(t.properties={title:"properties",wrapper:a["a"],data:e.properties}),e.pending&&(t.pending={title:"pending",wrapper:a["a"],data:e.pending}),e.current&&(t.current={title:`${e.name} [${s["a"].formatDate(1e3*e.timestamp,"HH:mm:ss")}]`,wrapper:a["a"],data:e.current})),t}},methods:{viewWidgetsLogHandler(e){this.widgetsViewedLog=e,this.beforeEnableWidgetByPane&&this.beforeEnableWidgetByPane("logs"),this.isWidgetsLogsActive=!0,this.activateWidgetWindow("logsView")},closeLogsWidgetsHandler(){this.$refs.logs&&this.$refs.logs.unselect()},nextWidgetLog(){this.$refs.logs.nextSelect()},prevWidgetLog(){this.$refs.logs.prevSelect()}}}},5110:function(e,t,i){},"5c16":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visible?i("widget-window",{ref:"widgetWrapper",style:{zIndex:e.isFullScreen?5:e.active?3:2},attrs:{"wrapper-size":e.wrapperSize,controls:e.controls,"view-model":e.$q.platform.is.desktop&&e.$q.screen.width>500?e.viewModel:e.fullScreenModel},on:{close:function(t){e.$emit("input",!1),e.$emit("close")},dragging:function(t){return e.$emit("active")},"change-view-model":e.changeViewModelHandler}},[i("q-tabs",{staticClass:"text-white",style:{width:e.isModified?"calc(100% - 66px)":e.$q.platform.is.mobile?"calc(100% - 33px)":"",height:e.isModified?"50px":""},attrs:{dense:!e.isModified,"outside-arrows":""},on:{input:function(t){e.prevTab=void 0}},model:{value:e.tabModel,callback:function(t){e.tabModel=t},expression:"tabModel"}},[e._l(e.config,(function(e,t){return[i("q-tab",{key:"tab-"+t,attrs:{name:t,label:e.title,color:"grey-9",icon:e.titleIcon}})]}))],2),i("div",{staticClass:"bg-grey-8 scroll relative-position",style:{height:e.isModified?"calc(100% - 50px)":"calc(100% - 40px)",width:"calc(100% - 4px)"}},e._l(e.config,(function(t,s){return i("q-tab-panel",{directives:[{name:"show",rawName:"v-show",value:e.tabModel===s,expression:"tabModel === key"}],key:"tab-pane-"+s,attrs:{name:s}},[t.description?i("div",[i("div",{staticClass:"text-center text-bold q-mb-sm text-white",class:[t.data["x-flespi-color"]],staticStyle:{"font-size":"1rem",width:"calc(100% - 35px)"},domProps:{innerHTML:e._s(t.description)}}),i("q-btn",{staticClass:"absolute",staticStyle:{top:"5px",right:"5px"},attrs:{color:"grey-1",flat:"",dense:"",icon:"mdi-content-copy"},on:{click:function(i){e.copyMessageHandler({content:e.getData(t.data)})}}},[i("q-tooltip",[e._v("Copy data")])],1)],1):e._e(),t.wrapper&&"object"===typeof t.wrapper?i(t.wrapper,{ref:s,refInFor:!0,tag:"component",attrs:{data:t.data&&e.getData(t.data),meta:t.meta,inverted:e.inverted},on:{action:function(e){t.action&&t.action(e)}}}):t.wrapper&&"string"===typeof t.wrapper?i(t.wrapper,{ref:s,refInFor:!0,tag:"component",class:{"text-white":void 0!==e.inverted}},[e._v(e._s(e.getData(t.data)))]):i("div",{ref:s,refInFor:!0,class:{"text-white":void 0!==e.inverted}},[e._v(e._s(e.getData(t.data)))])],1)})),1),i("div",{staticClass:"widget-window__actions"},e._l(e.actions,(function(t){return i("q-icon",{key:t.name,staticClass:"pull-right cursor-pointer",attrs:{name:t.icon,size:"30px",color:"white"},on:{click:function(i){return e.$emit(t.name)}}},[i("q-tooltip",[e._v(e._s(t.label))])],1)})),1)],1):e._e()},a=[],n=(i("13d5"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("vue-draggable-resizable",{ref:"dragResize",staticClass:"widget__wrapper absolute-top-left absolute-bottom-right",class:[e.isMinimized||e.isMaximized?"widget--pinned":""],style:e.wrapperStyles,attrs:{"drag-cancel":".widget--drag-stop",parent:!0,active:!0,x:e.x,y:e.y,w:e.width,h:e.height,"min-width":100,"min-height":100},on:{resizing:e.resizeHandler,dragging:e.draggingHandler}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMinimized&&!e.isMaximized,expression:"!isMinimized && !isMaximized"}],staticClass:"widget__header",style:{height:e.headerHeight+"px"}},[i("q-icon",{staticClass:"float-right cursor-pointer",attrs:{name:"mdi-close",color:"white"},nativeOn:{mousedown:function(t){return t.stopPropagation(),t.preventDefault(),e.closeHandler.apply(null,arguments)}}}),i("q-icon",{staticClass:"float-right cursor-pointer",attrs:{name:e.isMaximized?"mdi-fullscreen-exit":"mdi-fullscreen",color:"white"},nativeOn:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.maximizeHandler(),e.calculateViewModel()}}}),e.controls.minimizeLeft?i("q-icon",{staticClass:"float-right cursor-pointer",attrs:{name:"mdi-arrow-collapse-right",color:"white"},nativeOn:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.minimizeHandler("left"),e.calculateViewModel()}}}):e._e(),e.controls.minimizeRight?i("q-icon",{staticClass:"float-right cursor-pointer",attrs:{name:"mdi-arrow-collapse-left",color:"white"},nativeOn:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.minimizeHandler("right"),e.calculateViewModel()}}}):e._e()],1),i("div",{staticClass:"widget__content widget--drag-stop relative-position",style:e.styles},[e._t("default")],2),e.isMinimized||e.isMaximized?i("div",{staticClass:"widget__custom-controls widget--drag-stop",style:{top:e.isMaximized?"3px":""}},[(e.isMinimized||e.isMaximized)&&e.$q.platform.is.desktop&&e.$q.screen.width>500?i("q-icon",{staticClass:"pull-right cursor-pointer",attrs:{name:"mdi-window-restore",size:"25px",color:"white"},nativeOn:{mousedown:function(t){return t.stopPropagation(),t.preventDefault(),e.restoreHandler.apply(null,arguments)}}}):e._e(),i("q-icon",{staticClass:"pull-right cursor-pointer",attrs:{name:"mdi-close",size:"25px",color:"white"},nativeOn:{mousedown:function(t){return t.stopPropagation(),t.preventDefault(),e.closeHandler.apply(null,arguments)}}})],1):e._e()])}),o=[],r=i("fb19"),c=i.n(r),l=i("b047c"),d=i.n(l),m={name:"widget-float-window",props:["controls","wrapperSize","viewModel"],data(){return{height:520,width:500,prevWidth:0,prevHeight:0,prevX:0,prevY:0,headerHeight:20,x:50,y:50,isMinimized:!1,isMaximized:!1,minimizeTo:""}},computed:{styles(){return{width:`${this.width}px`,height:this.height-(this.isMinimized||this.isMaximized?0:this.headerHeight)+"px"}},wrapperStyles(){return{width:`${this.width}px`,height:`${this.height}px`,position:"absolute",backgroundColor:"#666"}}},methods:{closeHandler(){this.$emit("close"),this.isMinimized&&(this.minimizeTo="",this.isMinimized=!1),this.isMaximized&&(this.isMaximized=!1)},maximizeHandler(){this.prevWidth=this.width,this.prevHeight=this.height,this.prevX=this.x,this.prevY=this.y,this.maximize()},minimizeHandler(e){this.prevWidth=this.width,this.prevHeight=this.height,this.isMinimized=!0,this.minimizeTo=e,this.isMaximized&&(this.isMaximized=!1)},restoreHandler(){this.isMinimized=!1,this.isMaximized=!1,this.minimizeTo="",this.x=this.prevX||50,this.y=this.prevY||50,this.width=this.prevWidth||500,this.height=this.prevHeight||520,this.calculateViewModel()},minimize(e){const t=this.wrapperSize.width,i=this.wrapperSize.height;switch(this.width=300,this.height=i-50,e){case"left":this.$nextTick((()=>{this.x=t-300,this.y=i-this.height}));break;case"right":this.$nextTick((()=>{this.x=0,this.y=50}));break}},maximize(){const e=this.wrapperSize.width,t=this.wrapperSize.height;this.width=e,this.height=t,this.$nextTick((()=>{this.x=0,this.y=0})),this.isMinimized&&(this.minimizeTo="",this.isMinimized=!1),this.isMaximized=!0},resizeHandler(e,t,i,s){this.width=i,this.height=s,this.calculateViewModel()},onWindowResize(e){if(this.$refs.dragResize.checkParentSize(),this.isMinimized)this.minimize(this.minimizeTo);else if(this.isMaximized)this.maximize();else{if(this.wrapperSize.width>e.width){let t=this.x,i=this.wrapperSize.width-e.width;t+this.width>=this.wrapperSize.width-30&&(t&&(t-=i,t<0&&(i=-1*t,t=0),this.x=t),0===t&&(this.width-=i,this.width<100&&(this.width=100)))}if(this.wrapperSize.height>e.height){let t=this.y,i=this.wrapperSize.height-e.height;t+this.height>=this.wrapperSize.height-30&&(t&&(t-=i,t<0&&(i=-1*t,t=0),this.x=t),0===t&&(this.height-=i,this.height<100&&(this.height=100)))}}this.calculateViewModel()},draggingHandler(e,t){this.isMinimized&&(this.minimizeTo="",this.isMinimized=!1),this.isMaximized&&(this.isMaximized=!1),this.x=e,this.y=t,this.$emit("dragging"),this.calculateViewModel()},applyViewModel(e){if(!e)return!1;"minimized"!==e.type||this.isMinimized?"maximized"!==e.type||this.isMaximized?"windowed"===e.type&&(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):this.maximizeHandler():this.minimizeHandler(e.to)}},mounted(){this.$q.platform.is.mobile&&this.maximizeHandler(),this.applyViewModel(this.viewModel)},created(){this.calculateViewModel=d()((()=>{const e={};this.isMinimized?(e.type="minimized",e.to=this.minimizeTo):this.isMaximized?e.type="maximized":(e.type="windowed",e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height),this.$emit("change-view-model",e)}),150)},watch:{minimizeTo(e){e?this.minimize(e):(this.width=this.prevWidth,this.height=this.prevHeight)},wrapperSize(e){this.onWindowResize(e)},viewModel(e){this.applyViewModel(e)}},components:{VueDraggableResizable:c.a}},h=m,p=(i("8af3"),i("2877")),u=i("0016"),g=i("eebe"),f=i.n(g),v=Object(p["a"])(h,n,o,!1,null,null,null),b=v.exports;f()(v,"components",{QIcon:u["a"]});var w=i("cdde"),y=i("9b02"),x=i.n(y),$={props:["config","inverted","value","actions","active","controls","viewModel"],data(){return{prevTab:void 0,tabModel:Object.keys(this.config)[0],visible:!1,isModified:!1,isFullScreen:!1,wrapperSize:{},fullScreenModel:{type:"maximized"}}},methods:{getData(e){return"string"===typeof e?e:Object.keys(e).reduce(((t,i)=>("x-flespi-description"===i||"x-flespi-color"===i||(t[i]=e[i]),t)),{})},ref(e){return x()(this.$refs[e],0,void 0)},show(){this.visible=!0},hide(){this.visible=!1},setTab(e){this.tabModel=e},minimizeHandler(e){this.isModified=!!e},maximizeHandler(e){this.isFullScreen=e},minimize(e){this.$refs.widgetWrapper&&this.$refs.widgetWrapper.minimizeHandler(e)},escHandler(e){27===e.keyCode&&this.active&&(this.$emit("input",!1),this.$emit("close"))},resize(e){this.wrapperSize=e},changeViewModelHandler(e){switch(e.type){case"minimized":this.minimizeHandler({type:e.to});break;case"maximized":this.maximizeHandler(!0);break;case"windowed":this.minimizeHandler(),this.maximizeHandler(!1);break}this.$q.platform.is.desktop&&this.$q.screen.width>500&&this.$emit("change-view-model",e)},copyMessageHandler({index:e,content:t}){Object(w["a"])(JSON.stringify(t)).then((e=>{this.$q.notify({type:"positive",icon:"content_copy",message:"Data copied",timeout:1e3})}),(e=>{this.$q.notify({type:"negative",icon:"content_copy",message:"Error coping data",timeout:1e3})}))}},components:{WidgetWindow:b},watch:{value(e){this.visible=e},config(e){this.prevTab&&(this.setTab(this.prevTab),this.prevTab=void 0),e[this.tabModel]||(this.prevTab=this.tabModel,this.tabModel=Object.keys(e)[0])},viewModel(e){this.changeViewModelHandler(e)}},created(){this.viewModel&&this.changeViewModelHandler(this.viewModel),window.addEventListener("keyup",this.escHandler)},destroyed(){window.removeEventListener("keyup",this.escHandler)}},_=$,M=(i("9df9"),i("429b")),S=i("7460"),k=i("823b"),C=i("9c40"),N=i("05c0"),q=Object(p["a"])(_,s,a,!1,null,null,null);t["a"]=q.exports;f()(q,"components",{QTabs:M["a"],QTab:S["a"],QTabPanel:k["a"],QBtn:C["a"],QTooltip:N["a"],QIcon:u["a"]})},6512:function(e,t,i){"use strict";var s=i("ded3"),a=i.n(s),n=(i("13d5"),i("5319"),i("bd4c")),o=i("9b02"),r=i.n(o),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-view__image",style:{backgroundImage:"url("+e.data+")"}})},l=[],d={name:"image-view",props:{data:String,inverted:{type:Boolean,default(){return!0}}}},m=d,h=(i("8616"),i("2877")),p=Object(h["a"])(m,c,l,!1,null,null,null),u=p.exports,g=i("3a57"),f=i("b57c"),v=i("0860");t["a"]={data(){return{isWidgetsMessageActive:!1,widgetsViewedMessage:null}},computed:{fieldsDevicesMetaData(){const e=r()(this.$refs,"messages.cols",void 0);let t={};if(e){const i=Object.values(e.enum),s=r()(this.$refs,"messages.$refs.scrollList.activeCols",[]).reduce(((e,t)=>(e[t.name]=!0,e)),{});i&&(t=i.reduce(((e,t)=>(e[t.name]=a()({},t),e[t.name].display=s[t.name]||!1,e)),{}))}return t},messageWidgetsViewConfig(){const e=this.widgetsViewedMessage,t={};if(e){const i=`${e.ident?`<div style="font-size: 1.1rem">${e.ident}</div>`:""}${e.timestamp?`<div style="font-size: .8rem">${n["a"].formatDate(1e3*e.timestamp,"DD/MM/YYYY HH:mm:ss")}</div>`:""}`;e["position.latitude"]&&e["position.longitude"]&&(t.position={titleIcon:"mdi-map-marker-radius",wrapper:v["a"]}),t.message={title:"JSON",description:i,wrapper:g["a"],data:e},t.object={title:"Fields",description:i,wrapper:f["a"],meta:this.fieldsDevicesMetaData,action:this.messagesWidgetActionHandler,data:e},Object.keys(e).forEach((i=>{if(JSON.stringify(e[i]).match(/^data:image\/(?:gif|png|jpeg|bmp|webp)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/)||0===i.indexOf("image.bin.")){let s=e[i];0===i.indexOf("image.bin.")&&(s=`data:image/${i.split(".")[2]};base64,${e[i].replace(/^data:image\/\w*;base64,\s/,"")}`),t[`image{${i}}`]={title:`Image{${i}}`,wrapper:u,data:s}}}))}return t}},methods:{setWidgetsMessageView(e){this.widgetsViewedMessage=a()({},e);const t={latlng:[e["position.latitude"],e["position.longitude"]],direction:e["position.direction"]};this.isWidgetsMessageActive||(this.beforeEnableWidgetByPane&&this.beforeEnableWidgetByPane("messages"),this.isWidgetsMessageActive=!0),this.$nextTick((()=>{const e=this.$refs.messagesView.ref("position");e&&(e.clear(),this.mapExtendConfig&&e.addConfig(this.mapExtendConfig),t&&e.autobounds(!0).addNamedMarkers([t]),e.send())})),this.activateWidgetWindow("messagesView")},messageWidgetsActions(e,t){const i=this.isWidgetsMessageActive,s=this.$refs.messagesView;switch(e){case"position":this.setWidgetsMessageView(t.content),s.setTab(e);break;case"show":this.setWidgetsMessageView(t.content),s.setTab("message");break;case"object":this.setWidgetsMessageView(t.content),i||s.setTab("object");break;case"select":this.setWidgetsMessageView(t.content);break;case"image":{let e;this.setWidgetsMessageView(t.content),Object.keys(this.messageWidgetsViewConfig).some((t=>{const i=0===t.indexOf("image");return e=t,i})),e&&s.setTab(e);break}case"traffic":this.toTrafficHandler(t);break;case"hex":this.toHexHandler(t);break}},closeMessageWidgetsHandler(){this.$refs.messages&&this.$refs.messages.unselect(),this.trackWidgetMessageMarker&&this.addWidgetTrackMarker("track")},nextWidgetsMessage(){this.$refs.messages.nextSelect()},prevWidgetsMessage(){this.$refs.messages.prevSelect()},messagesWidgetActionHandler({type:e,data:t}){const i=r()(this.$refs.messages.$refs,"scrollList",void 0);if(i)switch(e){case"col-add":i.addCustomColumnHandler(t);break;case"col-remove":i.removeCustomColumnHandler(t);break}}},created(){this.$watch("mapExtendConfig",(e=>{const t=this.$refs.messagesView.ref("position");t&&(t.clear(["polygons","circles","corridors"]),t.addConfig(e),t.send())}))}}},"739a":function(e,t,i){"use strict";i("e613")},"798f":function(e,t,i){"use strict";i("13d5"),i("ddb0"),i("2b3d");var s=i("c423"),a=i("bd4c"),n=i("cdde"),o=i("5a3a"),r=i.n(o),c=i("91c8"),l=i.n(c);t["a"]={mixins:[s["a"]],methods:{getBytesArray(e,t){let i;if("hex"===t){const t=e.match(/.{1,32}/g);i=t.map((e=>e.match(/.{1,2}/g)))}else"text"===t&&(i=e.match(/.{1,2}/g));return i},getAddresses(e){return r()(0,16*e.match(/.{1,32}/g).length,16)},getSelected(e,t){let i=[];return-1!==e&&-1!==t&&(i=e>t?r()(t,e+1):r()(e,t+1)),i},getHeader(e){const t={0:"Connect",1:"Disconnect",2:"Data received",130:"Data received",3:"Data sent",131:"Data sent"};let i="";if(i+=t[e.type],i+="(",i+=a["a"].formatDate(1e3*e.timestamp,"DD/MM/YYYY HH:mm:ss"),e.data){const t=this.base64ToHex(e.data),s=0===e.type||1===e.type?"":e.type>=128?"udp":"tcp";i+=` size: ${Math.floor(t.length/2)}B`,i+=` ${s}`}return i+=")",i},getContent(e,t,i,s=[]){let a="";switch(e){case"hex":if(s.length){const e=t.match(/.{1,2}/g);a=s.map((t=>e[t])).join("")}else a=t;break;case"text":{const e=t.match(/.{1,2}/g),i=s.length?s.map((t=>e[t])):e;a=i.map((e=>String.fromCharCode(parseInt(e,16)))).join("");break}case"view":{const e=this.getBytesArray(t,i);if("text"===i){const t=s.length?s.map((t=>e[t])):e;a=t.map((e=>{let t=this.replaceByteWithMnemo(e);return"0A"===e&&(t+="\n"),t})).join("")}else{const i=s.length,n=l()(Object.keys(t.match(/.{1,2}/g)),16),o=this.getAddresses(t),r=i?n.reduce(((e,t)=>{let i=!0;const a=t.reduce(((e,a,n)=>(a<s[0]||a>s[s.length-1]?e.push(null):(e.push(a),i=!1),n===t.length-1&&(e=i?null:e),e)),[]);return e.push(a),e}),[]):n;r.forEach(((t,i)=>{if(!t)return!1;a+=`${o[i].toString(16).padStart(7,0).toUpperCase()}   `;const s=e[i];let n="",r="";t.forEach(((e,t)=>{e?(n+=s[t],r+=this.replaceByteWithDot(s[t])):(n+="  ",r+=" "),n+=" "})),a+=n,a+="   ",a+="".padEnd(32-2*t.length," "),a+="".padEnd(16-t.length," "),a+=r,a+="\n"}))}break}}return a},copy(e,t="hex"){Object(n["a"])(e).then((e=>{this.$q.notify({type:"positive",icon:"content_copy",message:`${t} copied`,timeout:1e3})}),(e=>{this.$q.notify({type:"negative",icon:"content_copy",message:`Error coping ${t}`,timeout:1e3})}))},exportData(e,t=""){const i="hex"===t?"application/octet-stream":"text/plain",s=document.createElement("a"),a=new Blob([e],{type:i}),n=URL.createObjectURL(a);s.setAttribute("href",n),s.setAttribute("download","data.txt"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}},"79d6":function(e,t,i){"use strict";i("ff12")},"839d":function(e){e.exports=JSON.parse('{"types":{"1":"item was created via REST API","2":"item was updated via REST API","3":"item was deleted via REST API","4":"item was removed from account/moved to account","20":"item was blocked","21":"item was unblocked","100":"channel has accepted connection","101":"channel connection was identified","102":"channel connection was closed","103":"channel data processing error","110":"new channel\'s command was created","111":"channel\'s command was updated","112":"channel\'s command was deleted","113":"channel\'s command executed or discarded","114":"channel configuration is invalid","115":"the command has been sent into the transport connection","200":"SMS received via modem","201":"SMS was sent via modem","202":"modem has successfully connected to SMS gateway","203":"modem has lost connection to SMS gateway server","204":"failed to connect to SMPP gateway","300":"device connected","301":"device disconnected","302":"received SMS from device","303":"sent SMS to device","304":"device data processing error","310":"received a new setting value from the device","311":"the system accepted new setting value","312":"the pending value of the setting has been sent to the device and assigned as the current setting value","313":"device rejected the new setting value","314":"the sending of new setting value was cancelled by user","315":"current setting value was cleared from the system by user","316":"the system marked the setting as unreadable due to exceeded retries limit","317":"the command to request or change the setting has been sent","320":"device plugin was activated","321":"device plugin was updated","322":"device plugin was deactivated","330":"device command added to the queue","331":"device command removed from the queue","332":"device command processed","333":"device command expired","334":"device command sent","401":"stream connected successfully","402":"stream has lost connection","403":"stream failed to deliver messages","404":"stream has sent messages","410":"new subscription was created for stream","411":"stream subscription was updated","412":"stream subscription was deleted","420":"stream was subscribed to device messages","422":"stream was unsubscribed from device messages","430":"stream was subscribed to channel messages","432":"stream was unsubscribed from channel messages","500":"mqtt session connection was accepted","501":"mqtt session connection was blocked","502":"mqtt session connection was rejected","503":"mqtt session connection was closed","504":"persistent session was overflowed and deleted","510":"new subscription was created for MQTT session via REST API","511":"MQTT session subscription was updated via REST API","512":"MQTT session subscription was deleted via REST API","520":"session has subscribed","521":"session has ubsubscribed","600":"token expired and has been deleted","601":"new devices assigned to calculator","602":"device was unassigned from calculator","603":"device parameters were changed in the calculator","604":"device was blocked by calculator","605":"device was unblocked by calculator","700":"container size has been changed","900":"cdn size has been changed"},"closeCodes":{"2":"connection closed by tracking device","3":"connection successfully processed and closed","4":"received data violates channel\'s protocol","5":"internal error","6":"data parsing error (see log details)","7":"connection closed due to server restart","8":"protocol implementation updated","9":"channel\'s parameters changed","10":"connection closed upon user\'s request","11":"outgoing connection failed","12":"current connection closed because of ident collision: device has opened another connection to the channel without closing first one. It may happen because of device firmware bug or by an unstable connectivity provider. In general, this happens to plenty of devices and usually can be ignored.","13":"device is blocked","14":"authentication failed","15":"device associated with the connection was created, changed or deleted","16":"channel rejected connection due to IP addresses whitelist mismatch","17":"connection is closed by inactivity timeout","128":"Unspecified error","129":"Malformed Packet","130":"Protocol Error","131":"Implementation specific error","132":"Unsupported Protocol Version","133":"Client Identifier not valid","134":"Bad User Name or Password","135":"Not authorized","136":"Server unavailable","137":"Server busy","138":"Banned","139":"Server shutting down","140":"Bad authentication method","141":"Keep Alive timeout","142":"Session taken over","143":"Topic Filter invalid","144":"Topic Name invalid","145":"Packet identifier in use","146":"Packet Identifier not found","147":"Receive Maximum exceeded","148":"Topic Alias invalid","149":"Packet too large","150":"Message rate too high","151":"Quota exceeded","152":"Administrative action","153":"Payload format invalid","154":"Retain not supported","155":"QoS not supported","156":"Use another server","157":"Server moved","158":"Shared Subscriptions not supported","159":"Connection rate exceeded","160":"Maximum connect time","161":"Subscription Identifiers not supported","162":"Wildcard Subscriptions not supported","-1":"unexpected disconnect"},"errorCodes":{"204":{"-1":"Authorization problems - check the modem\'s username and password","-2":"TCP/SSL connection related errors - check the modem\'s \'uri\' field"},"403":{"1":"unacceptable protocol version","2":"identifier rejected","3":"server unavailable","4":"bad username or password","5":"connection not authorized","100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Moved Temporarily","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I’m a teapot","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","449":"Retry With","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required","520":"Unknown Error","521":"Web Server Is Down","522":"Connection Timed Out","523":"Origin Is Unreachable","524":"A Timeout Occurred","525":"SSL Handshake Failed","526":"Invalid SSL Certificate","-99":"certificate error","-2":"request sent but no response received","-1":"failed to connect"}},"sendCodes":{"0":"Ok - Message Acceptable","1":"Invalid Message Length","2":"Invalid Command Length","3":"Invalid Command ID","4":"Invalid bind status","5":"Bind attempted when already bound","6":"Invalid priority flag","7":"Invalid registered-delivery flag","8":"SMSC system error","10":"Invalid source address","11":"Invalid destination address","12":"Invalid message-id","13":"Generic bind failure","14":"Invalid password","15":"Invalid System-ID","17":"Cancel failure","19":"Replace failure","20":"Too many messages in queue, at present","22":"Invalid services type","51":"Invalid number of destination addresses","52":"Invalid name","64":"Invalid Destination Flag Option","66":"Invalid value for submit with replace option","67":"Invalid value for esm_class field","68":"Cannot submit to a distribution list","69":"Generic submission failure","72":"Invalid type of number for source","73":"Invalid numbering plan indicator for source","74":"Invalid type of number for destination","75":"Invalid numbering plan indicator for destination","77":"Invalid esm type","78":"Invalid submit with replace flag option","85":"Invalid number of messages specified for query_last_msgs primitive","88":"SMSC is throttling inbound messages","98":"Invalid Validity Date","103":"Quota violation, add credit to account","194":"Invalid optional parameter length","195":"Missing optional parameter","196":"Invalid optional parameter value","254":"Generic delivery failure","255":"Unknown Error","-2":"Error from SMS gateway","-1":"No more SMS available for current period"},"blockedCodes":{"1":"exceeded connections limit","2":"exceeded messages limit per minute","3":"exceeded traffic limit per minute","4":"exceeded storage limit","5":"exceeded items limit","6":"item configuration is invalid","7":"customer was moved to another region"},"codesByEntities":{"base":[1,2,3,4,20,21],"channels":[100,101,102,103,110,111,112,113,114,115],"modems":[200,201,202,203,204],"devices":[300,301,302,303,304,310,311,312,313,314,315,316,317],"plugins":[320,321,322],"streams":[401,402,403,404,410,411,412,420,422,430,432],"mqtt":[500,501,502,503,504,510,511,512,520,521],"platform":[600],"calcs":[601,602,603,604,605],"containers":[700],"cdns":[900]}}')},"83a1":function(e,t,i){},8616:function(e,t,i){"use strict";i("b26d")},"8af3":function(e,t,i){"use strict";i("5110")},9530:function(e,t,i){"use strict";i("39af")},"9df9":function(e,t,i){"use strict";i("b7d0")},a99a:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-toolbar",{staticClass:"justify-between bg-grey-9",staticStyle:{height:"50px"}},[i("q-resize-observer",{on:{resize:e.resizeHandler}}),e._t("selects"),e.item?i("div",[e.item.deleted||void 0===e.mode?e._e():i("q-btn",{staticClass:"on-right pull-right text-center rounded-borders q-px-xs q-py-none",staticStyle:{"min-width":"73px","max-width":"73px"},attrs:{flat:"",dense:"",color:"white"},on:{click:function(t){return e.$emit("change-mode",!e.mode)}}},[i("q-icon",{attrs:{size:"1.5rem",color:"white",name:e.mode?"playlist_play":"history"}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v(e._s(e.mode?"Real-time":"History"))]),i("q-tooltip",[e._v("Mode (Real-time/History)")])],1),!e.item.deleted&&void 0!==e.ratio&&e.width>=900?i("q-btn-toggle",{staticClass:"q-ml-sm gt-xs",attrs:{dense:"",flat:"",color:"grey-4","toggle-color":"white","toggle-text-color":"white",size:"sm",value:e.ratio,options:[{label:"logs",value:100},{label:"both",value:50},{label:"messages",value:0}]},on:{input:function(t){return e.$emit("change-ratio",t)}}}):e._e()],1):e._e(),e.item&&e.$q.platform.is.desktop&&e.width>=900?i("div",{staticClass:"flex justify-end",style:{width:(e.actions&&e.actions.length?72*e.actions.length:"")+"px"}},[e._l(e.actions,(function(t,s){return[t.condition?i("transition",{key:s,attrs:{appear:"","enter-active-class":"animated bounceInDown","leave-active-class":"animated bounceOutUp"}},[i("q-btn",{staticClass:"on-left cursor-pointer pull-right text-center rounded-borders q-px-xs q-py-none text-white",staticStyle:{width:"60px"},attrs:{title:t.label,loading:t.async,flat:"",dense:""},on:{click:t.handler}},[i("div",{attrs:{slot:"loading"},slot:"loading"},[i("q-icon",{attrs:{size:"1.5rem",name:t.icon}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v(e._s(t.label))]),t.tooltip?i("q-tooltip",[e._v(e._s(t.tooltip))]):e._e(),i("q-spinner",{staticClass:"absolute-bottom-right",attrs:{color:"white",size:".7rem"}})],1),i("q-icon",{attrs:{size:"1.5rem",name:t.icon}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v(e._s(t.label))]),t.tooltip?i("q-tooltip",[e._v(e._s(t.tooltip))]):e._e()],1)],1):e._e()]}))],2):e.item&&(!e.$q.platform.is.desktop||e.width<900)?i("div",[e.hasActiveActions?i("q-btn",{attrs:{flat:"",icon:"mdi-dots-vertical",loading:e.hasAsync,color:"white",dense:""}},[i("template",{slot:"loading"},[i("q-icon",{attrs:{size:"1.5rem",name:"mdi-dots-vertical"}}),i("q-spinner",{staticClass:"absolute-bottom-right",attrs:{color:"white",size:".7rem"}})],1),i("q-menu",[i("q-list",{staticClass:"bg-grey-7",attrs:{dark:""}},[e.item.deleted||void 0===e.ratio?e._e():i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}]},[i("q-btn-toggle",{attrs:{dense:"",dark:"",color:"grey-4","toggle-color":"grey-6","toggle-text-color":"white",size:"sm",flat:"",value:e.ratio,options:[{label:"logs",value:100},{label:"both",value:50},{label:"messages",value:0}]},on:{input:function(t){return e.$emit("change-ratio",t)}}})],1),e._l(e.actions,(function(t,s){return[t.condition?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s,attrs:{clickable:"",dense:""},on:{click:t.handler}},[i("q-item-section",{attrs:{side:""}},[i("q-icon",{attrs:{name:t.icon}})],1),i("q-item-section",[e._v(e._s(t.label))]),t.async?i("q-item-section",{attrs:{side:""}},[i("q-spinner",{attrs:{color:"white",size:"1rem"}})],1):e._e(),t.tooltip?i("q-tooltip",[e._v(e._s(t.tooltip))]):e._e()],1):e._e()]}))],2)],1)],2):e._e()],1):e._e()],2)},a=[],n=(i("13d5"),{props:["item","ratio","mode","actions"],data(){return{width:0}},computed:{hasActiveActions(){return!this.item.deleted&&void 0!==this.ratio||this.actions&&this.actions.reduce(((e,t)=>e||t&&t.condition),!1)},hasAsync(){return!!this.actions.filter((e=>e.async)).length}},methods:{resizeHandler({width:e}){this.width=e}}}),o=n,r=i("2877"),c=i("65c6"),l=i("3980"),d=i("9c40"),m=i("0016"),h=i("05c0"),p=i("6a67"),u=i("0d59"),g=i("4e73"),f=i("1c1c"),v=i("66e5"),b=i("4074"),w=i("7f67"),y=i("eebe"),x=i.n(y),$=Object(r["a"])(o,s,a,!1,null,null,null);t["a"]=$.exports;x()($,"components",{QToolbar:c["a"],QResizeObserver:l["a"],QBtn:d["a"],QIcon:m["a"],QTooltip:h["a"],QBtnToggle:p["a"],QSpinner:u["a"],QMenu:g["a"],QList:f["a"],QItem:v["a"],QItemSection:b["a"]}),x()($,"directives",{ClosePopup:w["a"]})},b26d:function(e,t,i){},b57c:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%"}},[i("q-item",{staticClass:"q-pa-none",staticStyle:{position:"sticky",top:"0px","z-index":"1"}},[i("q-item-section",{staticClass:"q-px-sm"},[i("q-input",{staticClass:"q-py-none bg-grey-8",attrs:{type:"text",color:"white",dark:"",label:"Search",outlined:"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),i("q-list",{attrs:{separator:"",dark:""}},[Object.keys(e.data).length&&Object.keys(e.filteredObject).length?e._e():i("q-item",[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis text-bold text-center text-white",attrs:{header:""}},[e._v("No parameters")]),Object.keys(e.data).length?e._e():i("q-item-label",{staticClass:"ellipsis text-center text-white",attrs:{caption:""}},[e._v("Message has not fields")]),!Object.keys(e.filteredObject).length&&this.search?i("q-item-label",{staticClass:"ellipsis text-center text-white",attrs:{caption:""}},[e._v("Nothing found on your search")]):e._e()],1)],1),Object.keys(e.filteredObject).length?e._l(Object.keys(e.filteredObject),(function(t){return i("q-item",{key:t},[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis text-bold q-pa-none text-white",attrs:{header:""}},[i("span",[e._v(e._s(t))]),e.meta[t]&&e.meta[t].unit?i("span",{staticClass:"object-viewier__units"},[e._v(", "+e._s(e.meta[t].unit))]):e._e(),i("q-tooltip",[i("span",[e._v(e._s(t))]),e.meta[t]&&e.meta[t].unit?i("span",[e._v(", "+e._s(e.meta[t].unit))]):e._e()])],1),e.filteredObject[t]&&e.filteredObject[t].toString().match(/^data:image\/(?:gif|png|jpeg|bmp|webp)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/)?i("q-item-label",{attrs:{caption:""}},[i("img",{staticClass:"image-bin",attrs:{src:e.filteredObject[t],alt:t}})]):-1===t.indexOf("image.bin.")?i("q-item-label",{staticClass:"ellipsis text-white",attrs:{caption:""}},[e._v(e._s(JSON.stringify(e.filteredObject[t]))),i("q-tooltip",[e._v(e._s(JSON.stringify(e.filteredObject[t])))])],1):0===t.indexOf("image.bin.")?i("q-item-label",{attrs:{caption:""}},[i("img",{staticClass:"image-bin",attrs:{src:"data:image/"+t.split(".")[2]+";base64, "+e.filteredObject[t].replace(/^data\:image\/\w*\;base64\,\s/,""),alt:t}})]):e._e()],1),i("q-item-section",{attrs:{side:""}},[e.meta[t]&&e.meta[t].display?i("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-table-column-remove",color:"red-3"},on:{click:function(i){return e.action("col-remove",t)}}}):i("q-btn",{attrs:{flat:"",dense:"",icon:"mdi-table-column-plus-after",color:"green-3"},on:{click:function(i){return e.action("col-add",t)}}})],1)],1)})):e._e()],2)],1)},a=[],n=(i("13d5"),{props:["data","meta"],data(){return{search:""}},computed:{filteredObject(){return Object.keys(this.data).reduce(((e,t)=>(-1!==t.indexOf(this.search)&&(e[t]=this.data[t]),e)),{})}},methods:{action(e,t){this.$emit("action",{type:e,data:t})}}}),o=n,r=(i("9530"),i("2877")),c=i("66e5"),l=i("4074"),d=i("27f9"),m=i("1c1c"),h=i("0170"),p=i("05c0"),u=i("9c40"),g=i("eebe"),f=i.n(g),v=Object(r["a"])(o,s,a,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QItem:c["a"],QItemSection:l["a"],QInput:d["a"],QList:m["a"],QItemLabel:h["a"],QTooltip:p["a"],QBtn:u["a"]})},b7d0:function(e,t,i){},bed7:function(e,t,i){},c423:function(e,t,i){"use strict";i("ddb0");t["a"]={methods:{base64ToHex(e){return"string"!==typeof e?"":[...atob(e)].map((e=>e.charCodeAt(0).toString(16).padStart(2,0))).join("").toUpperCase()},base64ToText(e){return"string"!==typeof e?"":atob(e)},base64ToTextWithMnemoReplacing(e){if("string"!==typeof e)return"";const t=this.base64ToHex(e),i=t.match(/.{1,2}/g);return i.map((e=>this.replaceByteWithMnemo(e))).join("")},isEmptySymbol(e){const t=parseInt(e,16);return t<32||t>=127},replaceByteWithDot(e){const t=parseInt(e,16),i=String.fromCharCode(t);return t<32||t>=127?".":i},replaceByteWithMnemo(e){const t=parseInt(e,16),i=String.fromCharCode(t);let s;return s=t<32||t>=127||i.match(/\s/g)&&" "!==i?"\r"===i?"\\r":"\t"===i?"\\t":"\n"===i?"\\n":`\\x${e}`:i,s}}}},cc73:function(e,t,i){"use strict";i("bed7")},d728a:function(e,t,i){},d77f:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper",on:{click:e.clearSelectedHandler}},[i("q-menu",{attrs:{"context-menu":""}},[i("q-list",{staticClass:"bg-grey-8 text-white",staticStyle:{"min-width":"100px"}},[i("div",{staticClass:"q-pa-sm"},[i("div",{staticStyle:{"font-size":".8rem"}},[e._v("Copy as")]),i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",label:"shown"},on:{click:function(t){e.copy(e.getContent("view",e.hex,e.view,e.selected),"view")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",label:"hex"},on:{click:function(t){e.copy(e.getContent("hex",e.hex,e.view,e.selected),"hex")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",label:"raw"},on:{click:function(t){e.copy(e.getContent("text",e.hex,e.view,e.selected),"text")}}})],1)]),i("q-separator"),i("div",{staticClass:"q-pa-sm"},[i("div",{staticStyle:{"font-size":".8rem"}},[e._v("Export as")]),i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",label:"shown"},on:{click:function(t){e.exportData(e.getContent("view",e.hex,e.view,e.selected),"view")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",label:"hex"},on:{click:function(t){e.exportData(e.getContent("hex",e.hex,e.view,e.selected),"hex")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",label:"raw"},on:{click:function(t){e.exportData(e.getContent("text",e.hex,e.view,e.selected),"text")}}})],1)])],1)],1),e.hex?i("div",{staticClass:"text-white hex-viewer",style:{wordBreak:"text"===e.view?"break-all":""},on:{click:e.selectAllHandler,mouseover:e.wrapperMouseOverHandler}},["hex"===e.view?[i("div",{staticClass:"hex-viewer__addresses"},e._l(e.addresses,(function(t){return i("div",{key:t},[e._v(e._s(t.toString(16).padStart(7,0).toUpperCase()))])})),0),i("div",{staticClass:"hex-viewer__value",on:{mouseleave:e.mouseLeaveHandler}},e._l(e.bytesArray,(function(t,s){return i("div",{key:s+t},e._l(t,(function(t,a){return i("span",{key:""+s+a+t,staticClass:"q-pr-xs q-pl-xs q-mt-sm q-mb-sm",class:{selected:e.selected.includes(16*s+a),"--active":e.active===16*s+a||e.start===e.end===16*s+a},on:{mouseover:function(t){return e.setActiveHandler(s,a)},mousedown:function(t){return e.startSelectionHandler(t,s,a)},mouseup:function(t){return e.endSelectionHandler(t,s,a)}}},[e._v(e._s(t))])})),0)})),0),i("div",{staticClass:"hex-viewer__text",on:{mouseleave:e.mouseLeaveHandler}},e._l(e.bytesArray,(function(t,s){return i("div",{key:s+t},e._l(t,(function(t,a){return i("span",{key:""+s+a+t,staticClass:"q-pr-xs q-pl-xs q-mt-sm q-mb-sm hex-char",class:{selected:e.selected.includes(16*s+a),"--active":e.active===16*s+a||e.start===e.end===16*s+a},on:{mouseover:function(t){return e.setActiveHandler(s,a)},mousedown:function(t){return e.startSelectionHandler(t,s,a)},mouseup:function(t){return e.endSelectionHandler(t,s,a)}}},[e._v(e._s(e.replaceByteWithDot(t)))])})),0)})),0)]:"text"===e.view?e._l(e.bytesArray,(function(t,s){return i("span",{key:""+s+t,staticClass:"q-mt-sm q-mb-sm text-char",class:{selected:e.selected.includes(s),"--active":e.active===s||e.start===e.end===s,"raw-hex-data":e.isEmptySymbol(t)},on:{mouseover:function(t){return e.setActiveHandler(null,s)},mousedown:function(t){return e.startSelectionHandler(t,null,s)},mouseup:function(t){return e.endSelectionHandler(t,null,s)}}},[e._v(e._s(e.replaceByteWithMnemo(t))),"0A"===t?i("br"):e._e()])})):e._e()],2):i("div",{staticStyle:{"text-align":"center",color:"#9e9e9e","font-size":"3rem","padding-top":"40px"}},[e._v("No HEX data")])],1)},a=[],n=i("798f"),o={name:"HexViewer",props:["hex","view"],data(){return{active:-1,start:-1,end:-1,selectionMode:!1,timer:0,clicks:0}},computed:{bytesArray(){return this.getBytesArray(this.hex,this.view)},addresses(){return this.getAddresses(this.hex)},selected(){return this.getSelected(this.start,this.end)}},watch:{hex(){this.start=-1,this.end=-1}},mixins:[n["a"]],methods:{clearSelectedHandler(e){e.target.isEqualNode(this.$refs.wrapper)&&!this.selectionMode&&(this.start=-1,this.end=-1),this.selectionMode&&(this.selectionMode=!1)},startSelectionHandler(e,t,i){if(3===e.which)return!1;-1!==this.end&&(this.end=-1),this.selectionMode=!0,this.start=t?16*t+i:i},endSelectionHandler(e,t,i){if(3===e.which)return!1;this.end=t?16*t+i:i,this.selectionMode=!1},setActiveHandler(e,t){this.selectionMode?this.end=e?16*e+t:t:this.active=e?16*e+t:t},selectAllHandler(){this.clicks++,1===this.clicks?this.timer=setTimeout((()=>{this.clicks=0}),700):(clearTimeout(this.timer),this.clicks=0,this.start=0,this.end=this.hex.match(/.{1,2}/g).length-1)},mouseLeaveHandler(){this.active=-1,this.selectionMode&&this.$q.platform.is.desktop&&(this.end=this.hex.match(/.{1,2}/g).length-1)},scrollingTo(e){if(this.scrollingId)return!1;this.scrollingId=setInterval((()=>{this.selectionMode||this.clearSCrolling(),"top"===e?this.$refs.wrapper.scrollTop-=5:"bottom"===e&&(this.$refs.wrapper.scrollTop+=5)}),100)},clearSCrolling(){clearInterval(this.scrollingId),this.scrollingId=void 0},wrapperMouseOverHandler(e){if(this.selectionMode){const t=this.$refs.wrapper.offsetHeight,i=t/20,s=t-i,a=e.layerY;a<i?this.scrollingTo("top"):a>s?this.scrollingTo("bottom"):this.clearSCrolling()}}}},r=o,c=(i("79d6"),i("2877")),l=i("4e73"),d=i("1c1c"),m=i("9c40"),h=i("eb85"),p=i("7f67"),u=i("eebe"),g=i.n(u),f=Object(c["a"])(r,s,a,!1,null,null,null);t["a"]=f.exports;g()(f,"components",{QMenu:l["a"],QList:d["a"],QBtn:m["a"],QSeparator:h["a"]}),g()(f,"directives",{ClosePopup:p["a"]})},df1d:function(e,t,i){"use strict";var s=i("ded3"),a=i.n(s),n=i("9b02"),o=i.n(n);t["a"]={data(){return{widgetsHandleActions:[{name:"prev",label:"Previous message",icon:"mdi-arrow-left-thick"},{name:"next",label:"Next message",icon:"mdi-arrow-right-thick"}],activeWidgetWindow:void 0}},computed:{widgetStyle(){const e={},t=this.widgetsViewModel;for(const i in t){const s=t[i]||{};s.to&&(e[s.to]=i)}return e},widgetWindowControls(){return{minimizeRight:!this.widgetStyle.right,minimizeLeft:!this.widgetStyle.left}},widgetsViewModel(){return o()(this.settings.viewSettings,`${this.entityName}.widgetView`,{})}},methods:{widgetsChangeViewModelHandler(e,t,i){this.$emit("update:settings",{type:"ENTITY_VIEW_SETTINGS_CHANGE",opt:{entity:e},value:{widgetView:a()(a()({},this.widgetsViewModel),{[t]:i})}})},activateWidgetWindow(e){this.activeWidgetWindow=e},ratioWidgetsModify(e){const t=100===e,i=0===e;t?(this.isWidgetsMessageActive=!1,this.isWidgetsTrackActive=!1):i&&(this.isWidgetsLogsActive=!1)}}}},e613:function(e,t,i){},ff12:function(e,t,i){}}]);