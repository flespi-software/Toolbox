(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{1635:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",[i("entities-toolbar",{attrs:{item:e.selectedItem}},[i("div",{staticClass:"flex",class:{"middle-modificator":!e.active},attrs:{slot:"selects"},slot:"selects"},[i("div",{staticStyle:{display:"inline-flex"},style:{maxWidth:e.needShowBackToChannel&&e.needShowBackToDevice?"calc(100% - 150px)":e.needShowBackToChannel||e.needShowBackToDevice?"calc(100% - 80px)":"100%"}},[i("q-select",{ref:"itemSelect",staticClass:"items__select",class:{"items__select--no-selected":!e.active},attrs:{value:e.active,options:e.filteredItems,filled:"",loading:e.isItemsInitStart&&!e.isItemsInit,label:e.active?"Channel":"SELECT CHANNEL",dark:"","hide-bottom-space":"",dense:"",color:"white",disable:!e.isNeedSelect||"string"===typeof e.isNeedSelect&&e.isNeedSelect.indexOf("channels")>-1,"hide-dropdown-icon":!e.isNeedSelect||"string"===typeof e.isNeedSelect&&e.isNeedSelect.indexOf("channels")>-1,"popup-content-class":"items__popup","popup-content-style":{height:48*(e.filteredItems.length>6?6:e.filteredItems.length)+48+"px"}},on:{filter:function(t,i){return e.filterItems("channels",t,i)}},scopedSlots:e._u([{key:"no-option",fn:function(){return[i("div",[i("q-input",{staticClass:"q-ma-xs",attrs:{outlined:"","hide-bottom-space":"",rounded:"",dense:"",color:"white",dark:"",placeholder:"Filter",autofocus:""},on:{input:function(t){return e.$refs.itemSelect.filter(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"prepend",name:"mdi-magnify",color:"white"},slot:"prepend"})],1),i("div",{staticClass:"text-center"},[e._v("No results")])],1)]},proxy:!0},{key:"selected-item",fn:function(t){return[e.selectedItem?i("q-item",e._g(e._b({staticClass:"q-pa-none",staticStyle:{"min-height":"20px","margin-top":"2px","max-width":"100%"}},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis overflow-hidden q-pa-none text-white",attrs:{header:""}},[e._v(e._s(e.selectedItem.name||"<noname>"))]),i("q-item-label",{staticClass:"q-pa-none q-mt-none text-white ellipsis",staticStyle:{"line-height":"0.75rem!important","margin-top":"1px"},attrs:{caption:""}},[i("small",[e._v(e._s(e.selectedItem.uri||"<no uri>"))])])],1),i("q-item-section",{staticClass:"text-white",attrs:{side:""}},[i("q-item-label",{staticClass:"q-pa-none q-mt-none text-right"},[i("small",[e._v("#"+e._s(e.selectedItem.id))])])],1)],1):e._e()]}},e.filteredItems.length?{key:"option",fn:function(t){return[i("q-item",e._g(e._b({staticClass:"q-pa-xs",attrs:{clickable:""},on:{click:function(i){e.active=t.opt.id}}},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis overflow-hidden q-pa-xs",attrs:{header:""}},[e._v(e._s(t.opt.name||"<noname>"))]),i("q-item-label",{staticClass:"q-pa-none q-mt-none",staticStyle:{"line-height":"0.75rem!important","margin-top":"1px"},attrs:{caption:""}},[i("small",[e._v(e._s(t.opt.uri||"<no uri>"))])])],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",{staticClass:"q-pa-none q-mt-none text-right",class:{"q-pr-xs":e.$q.platform.is.mobile}},[i("small",[e._v("#"+e._s(t.opt.id))])])],1)],1)]}}:null],null,!0)},[i("div",{staticClass:"bg-dark q-pa-xs select__filter",attrs:{slot:"before-options"},slot:"before-options"},[i("q-input",{attrs:{outlined:"","hide-bottom-space":"",rounded:"",dense:"",color:"white",dark:"",placeholder:"Filter",autofocus:""},on:{input:function(t){return e.$refs.itemSelect.filter(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"prepend",name:"mdi-magnify",color:"white"},slot:"prepend"})],1)],1)])],1),i("transition-group",{attrs:{appear:"","enter-active-class":"animated bounceInDown","leave-active-class":"animated bounceOutUp"}},[e.needShowBackToChannel?i("q-btn",{key:"channel",staticClass:"on-right pull-right text-center rounded-borders q-px-xs q-py-none text-white",staticStyle:{width:"60px"},attrs:{title:"View channels",flat:"",dense:""},on:{click:e.viewLogsHandler}},[i("q-icon",{attrs:{size:"1.5rem",color:"white",name:"merge_type"}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v("Channel")])],1):e._e(),e.needShowBackToDevice?i("q-btn",{key:"device",staticClass:"on-right pull-right text-center rounded-borders q-px-xs q-py-none text-white",staticStyle:{width:"60px"},attrs:{title:"View devices",flat:"",dense:""},on:{click:e.goToDevice}},[i("q-icon",{attrs:{size:"1.5rem",color:"white",name:"mdi-developer-board"}}),i("div",{staticStyle:{"font-size":".7rem","line-height":".7rem"}},[e._v("Device")])],1):e._e()],1)],1)]),e.active?i("traffic-viewer",{staticClass:"flex",attrs:{active:e.active,"active-device":e.activeDevice,isVisibleToolbar:e.isVisibleToolbar,"device-closeble":e.needShowBackToChannel,config:e.config},on:{"change-active-device":e.changeActiveDeviceHandler}}):e._e(),!e.items.length&&e.isItemsInit?i("div",{staticClass:"text-center text-grey-3 q-mt-lg",staticStyle:{"font-size":"2rem"}},[e._v(e._s(e.isLoading?"Fetching data..":"Compatible channels not found"))]):e._e()],1)},a=[],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.activeDevice?i("messages",{directives:[{name:"show",rawName:"v-show",value:e.$q.platform.is.desktop||e.$q.platform.is.mobile&&!e.selectedMessages,expression:"$q.platform.is.desktop || ($q.platform.is.mobile && !selectedMessages)"}],ref:"messages",style:{height:"calc(100vh - "+(e.isVisibleToolbar?"100px":"50px")+")",position:"relative",width:e.$q.platform.is.desktop?"25%":"100%",minWidth:"250px"},attrs:{activeId:e.active,limit:e.limit,config:e.config.messages,"device-closeble":e.deviceCloseble,device:e.activeDevice,view:e.typeOfHexView},on:{"view-data":function(t){e.selectedMessages=t},close:function(){e.$emit("change-active-device",null),e.selectedMessages=""}}}):i("devices",{directives:[{name:"show",rawName:"v-show",value:e.$q.platform.is.desktop||e.$q.platform.is.mobile&&!e.selectedMessages,expression:"$q.platform.is.desktop || ($q.platform.is.mobile && !selectedMessages)"}],ref:"devices",style:{height:"calc(100vh - "+(e.isVisibleToolbar?"100px":"50px")+")",position:"relative",width:e.$q.platform.is.desktop?"25%":"100%",minWidth:"250px"},attrs:{activeId:e.active,config:e.config.messages,device:e.activeDevice,view:e.typeOfHexView},on:{"view-data":function(t){e.selectedMessages=t},"change:device":function(t){e.$emit("change-active-device",t)},close:function(){e.$emit("change-active-device",null),e.selectedMessages=""},"device:preview":e.previewShow,"device:preview-hide":e.previewHide}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.$q.platform.is.desktop||e.$q.platform.is.mobile&&e.selectedMessages,expression:"$q.platform.is.desktop || ($q.platform.is.mobile && selectedMessages)"}],style:{width:e.$q.platform.is.desktop?"75%":"100%",maxWidth:e.$q.platform.is.desktop?"calc(100% - 250px)":""}},[e.activeDevice?i("q-toolbar",{staticClass:"bg-grey-9"},[e.$q.platform.is.mobile?i("q-icon",{staticClass:"cursor-pointer",attrs:{color:"white",size:"1.5rem",name:"mdi-close"},nativeOn:{click:function(t){return function(){e.selectedMessages=""}.apply(null,arguments)}}}):e._e(),i("q-toolbar-title",[i("div",{staticClass:"text-white"},[e._v(e._s(e.activeDevice.ident))])]),i("q-btn",{attrs:{color:"white",flat:"",dense:"",label:"hex"===e.typeOfHexView?"text":"hex","icon-right":"hex"===e.typeOfHexView?"mdi-format-text":"mdi-matrix"},on:{click:function(t){e.typeOfHexView="hex"===e.typeOfHexView?"text":"hex"}}},[i("q-tooltip",[e._v("Change view mode to "+e._s("hex"===e.typeOfHexView?"text":"hex"))])],1),e.activeDevice?i("q-btn",{attrs:{color:"white",flat:"",dense:"",icon:"mdi-export-variant"}},[i("q-tooltip",[e._v("Export")]),i("q-menu",{attrs:{"no-route-dismiss":""}},[i("q-list",{staticClass:"bg-grey-8 text-white",staticStyle:{"min-width":"150px"}},[i("div",{staticClass:"q-pa-sm"},[i("div",{staticStyle:{"font-size":".8rem"}},[e._v("Copy selected packets as")]),i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"shown"},on:{click:function(t){return e.copySelected()}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"hex"},on:{click:function(t){return e.copySelected("hex")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"raw"},on:{click:function(t){return e.copySelected("text")}}})],1)]),i("q-separator"),i("div",{staticClass:"q-pa-sm"},[i("div",{staticStyle:{"font-size":".8rem"}},[e._v("Export selected packets as")]),i("div",[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"shown"},on:{click:function(t){return e.exportSelected()}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"hex"},on:{click:function(t){return e.exportSelected("hex")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:!e.selectedMessages.length,dense:"",flat:"",label:"raw"},on:{click:function(t){return e.exportSelected("text")}}})],1)]),i("q-separator"),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){e.$refs.messages&&e.$refs.messages.exportModalOpen()}}},[i("q-item-section",[e._v("Export by time")])],1)],1)],1)],1):e._e()],1):e._e(),e.activeDevice?i("packet-view",{style:{height:"calc(100vh - "+(e.isVisibleToolbar&&e.activeDevice?"150px":"100px")+")",position:"relative",overflow:"auto"},attrs:{packets:e.selectedMessages,view:e.typeOfHexView}}):e.$q.platform.is.desktop&&e.devicePreview&&e.devicePreviewMessages.length?i("div",{staticClass:"q-pa-md",staticStyle:{overflow:"hidden","max-height":"calc(100vh - 100px)"}},[i("q-timeline",{attrs:{layout:"loose",color:"white",dark:""}},e._l(e.devicePreviewMessages,(function(t,s){return i("message-preview-item",{key:s,attrs:{message:t,view:e.typeOfHexView}})})),1)],1):i("div",{staticStyle:{"text-align":"center",color:"#9e9e9e","font-size":"3rem","padding-top":"40px"}},[i("div",[e._v("Select ident")]),i("q-icon",{attrs:{name:"mdi-arrow-down-bold-outline",size:"3rem"}}),i("div",[e._v("Find message")]),i("q-icon",{attrs:{name:"mdi-arrow-down-bold-outline",size:"3rem"}}),i("div",[e._v("Analyze data")])],1)],1)],1)},o=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper"},[i("q-resize-observer",{on:{resize:e.wrapperResizeHandler}}),i("div",[i("q-toolbar",{staticClass:"bg-grey-9"},[e.deviceCloseble?i("q-btn",{staticClass:"text-white",attrs:{flat:"",dense:"",rounded:"",icon:"mdi-arrow-left"},on:{click:e.closeDevice}},[i("q-tooltip",[e._v("Close current device")])],1):e._e(),e.deviceCloseble?i("q-toolbar-title"):e._e(),i("date-range-modal",{staticClass:"flex flex-center",attrs:{date:e.dateRange,theme:e.theme},on:{save:e.dateRangeChange}})],1),e.loadingFlag&&e.itemsCount>0?i("div",{staticClass:"absolute-bottom-right absolute-top-left",staticStyle:{overflow:"hidden",top:"50px"}},e._l(new Array(e.itemsCount).fill(""),(function(e,t){return i("message-skeleton",{key:t})})),1):!e.loadingFlag&&e.messages.length?[i("VirtualList",{ref:"scroller",class:{"bg-grey-9":!0,"text-white":!0,"cursor-pointer":!0},style:{position:"absolute",top:"50px",bottom:0,right:0,left:0,height:"auto"},attrs:{onscroll:e.listScroll,size:e.itemHeight,remain:e.itemsCount,wclass:"q-w-list"}},e._l(e.messages,(function(t,s){return i("messages-list-item",{key:s,attrs:{item:t,index:s,actions:e.actions,itemHeight:e.itemHeight,selected:e.selected.includes(s),view:e.view},on:{action:e.actionHandler,"item-click":e.messageClickHandler},nativeOn:{mouseenter:function(i){return e.highlightConn(t.conn)},mouseleave:function(t){return e.highlightConn(null)}}})})),1)]:i("empty-pane",{attrs:{config:e.config.emptyState}})],2),i("export-modal",{ref:"export",attrs:{format:e.view,dateRange:e.dateRange,config:e.config,ident:e.device.ident,"item-id":e.activeId}})],1)},l=[],c=(i("ddb0"),i("e9c4"),i("89c1")),d=i.n(c),h=i("9b02"),m=i.n(h),u=i("0f32"),p=i.n(u),g=i("de45"),v=i("cdde"),f=i("e812"),w=i("121a"),$=i("3ba5"),b=i("5a3a"),x=i.n(b),y=i("5de8"),q=i("6126"),C=i("c853"),S={props:["activeId","device","limit","config","view","deviceCloseble"],data(){return{theme:this.config.theme,viewConfig:this.config.viewConfig,actions:this.config.actions,moduleName:this.config.vuexModuleName,itemHeight:53,itemsCount:0,wrapperHeight:0,needAutoScroll:!0,selected:[],scrollerScrollTop:0,isInit:!1}},computed:{messages:{get(){return this.$store.state[this.moduleName].messages},set(e){this.$store.commit(`${this.moduleName}/setMessages`,e)}},currentLimit:{get(){return this.$store.state[this.moduleName].limit},set(e){this.$store.commit(`${this.moduleName}/setLimit`,e)}},dateRange(){return[this.$store.state[this.moduleName].from,this.$store.state[this.moduleName].to]},from:{get(){return this.$store.state[this.moduleName].from},set(e){e=e||0,this.$store.commit(`${this.moduleName}/setFrom`,e)}},to:{get(){return this.$store.state[this.moduleName].to},set(e){e=e||0,this.$store.commit(`${this.moduleName}/setTo`,e)}},realtimeEnabled(){return this.$store.state[this.moduleName].messagePolling},loadingFlag(){const e=this.$store.state;return!(!e[this.config.vuexModuleName]||!e[this.config.vuexModuleName].isLoading)}},methods:{resetParams(){if(!this.$refs.wrapper)return!1;if(this.wrapperHeight=this.$refs.wrapper.offsetHeight-this.itemHeight,this.itemsCount=Math.ceil(this.wrapperHeight/this.itemHeight),this.$refs.scroller&&this.$refs.scroller.forceRender(),this.$refs.scroller&&this.$refs.scroller.$el){const e=this.$refs.scroller.$el;e.scrollTop+=1}},dateRangeChangeHandler(e){const t=e[0],i=e[1];if(this.from===t&&this.to===i)return!1;this.from=t,this.to=i,this.realtimeEnabled&&this.$store.dispatch(`${this.moduleName}/removePollingGetMessages`),this.needAutoScroll&&i<=Date.now()&&(this.needAutoScroll=!1),this.$store.commit(`${this.moduleName}/clearMessages`),this.$store.dispatch(`${this.moduleName}/getMessages`).then((()=>{i>Date.now()&&this.$store.dispatch(`${this.moduleName}/pollingGetMessages`)}))},dateRangeChange(e){this.updateRoute({query:{from:e[0]/1e3,to:e[1]/1e3}})},clearSelected(){this.selected=[]},wrapperResizeHandler(){this.resetParams()},getScrollDirection(e){let t=null;return t=e>this.currentScrollTop?"bottom":e<this.currentScrollTop?"top":"none",t},listScroll:function(e,t){const{offset:i}=t;this.currentScrollTop||(this.currentScrollTop=i);const s=m()(this.$refs,"scroller.$el",void 0);if(!s)return!1;const a=s.scrollHeight-s.clientHeight,n=this.getScrollDirection(i),o=.1*a;this.allScrollTop=this.$refs.scroller?this.$refs.scroller.$el.scrollHeight-this.$refs.scroller.$el.clientHeight:0,this.messages.length&&(i<this.currentScrollTop&&this.needAutoScroll?this.needAutoScroll=!1:!this.needAutoScroll&&this.realtimeEnabled&&i>=this.allScrollTop&&(this.needAutoScroll=!0),this.currentScrollTop=i),n&&("top"===n||"none"===n)&&i<o?this.debouncedGetMessagesPrev():n&&("bottom"===n||"none"===n)&&i+o>=a&&this.debouncedGetMessagesNext()},getMessagesPrev(){const e=m()(this.$refs,"scroller.$el",void 0),t=e.scrollHeight-e.clientHeight,i=e.scrollTop;this.$store.dispatch(`${this.moduleName}/getMessagesPrev`).then((s=>{if(s&&s.length){const s=e.scrollHeight-e.clientHeight;e.scrollTop=s-t+i}}))},getMessagesNext(){this.$store.dispatch(`${this.moduleName}/getMessagesNext`)},actionHandler({index:e,type:t,content:i}){switch(t){case"view":this.viewMessagesHandler({index:e,content:i});break;case"copy":this.copyMessageHandler({index:e,content:i});break}},viewMessagesHandler({index:e,content:t}){this.selected=[e],this.$root.$emit("view-data",t)},messageClickHandler({index:e,content:t,event:i}){if(i.shiftKey)this.selected[0]?this.selected[0]>e?this.selected=x()(e,this.selected[0]+1):this.selected=x()(this.selected[0],e+1):this.selected=[e];else if(i.ctrlKey||i.metaKey)if(this.selected.includes(e)){const t=this.selected;t.splice(this.selected.indexOf(e),1),this.selected=t}else this.selected=[...this.selected,e];else this.selected=[e];this.needAutoScroll&&(this.needAutoScroll=!1),this.selected.sort(((e,t)=>e-t)),this.$emit("view-data",this.selected.map((e=>({...this.messages[e],index:e}))))},copyMessageHandler({index:e,content:t}){Object(v["a"])(JSON.stringify(t)).then((e=>{this.$q.notify({type:"positive",icon:"content_copy",message:"Message copied",timeout:1e3})}),(e=>{this.$q.notify({type:"negative",icon:"content_copy",message:"Error coping messages",timeout:1e3})}))},unselect(){this.selected.length&&(this.selected=[])},closeDevice(){this.$emit("close")},clear(){this.realtimeEnabled&&this.$store.dispatch(`${this.moduleName}/removePollingGetMessages`),this.$store.commit(`${this.moduleName}/clearMessages`),this.closeDevice()},exportModalOpen(){this.$refs.export.show()},highlightIncoming(e){const t=e=>2===e||130===e||66===e||34===e,{incomingMessageIndex:i,incomingMessageIndexEnd:s}=this.messages.reduce(((i,s,a)=>(t(s.type)&&(-1===i.incomingMessageIndex&&(i.incomingMessageIndex=a),2===s.type&&Math.floor(s.timestamp)===Math.floor(e)&&-1===i.incomingMessageIndexEnd&&(i.incomingMessageIndexEnd=a),2!=s.type&&Math.floor(s.timestamp)===Math.floor(e)&&(i.incomingMessageIndexEnd=a)),i)),{incomingMessageIndex:-1,incomingMessageIndexEnd:-1});s>-1?this.messageClickHandler({index:s,event:{}}):i>-1&&this.messageClickHandler({index:i,event:{}})},async init(){this.currentLimit=this.limit,this.activeId&&!this.$store.state[this.moduleName].active&&this.$store.commit(`${this.moduleName}/setActive`,this.activeId),this.device&&!this.$store.state[this.moduleName].ident&&this.$store.commit(`${this.moduleName}/setIdent`,this.device.ident);this.$route.query.error&&JSON.parse(this.$route.query.error);const e=1e3*this.$route.query.from,t=1e3*this.$route.query.to,i=this.$route.query.highlight||e;e&&t?(this.from=e,this.to=t,await this.$store.dispatch(`${this.moduleName}/getMessages`),this.$nextTick((()=>this.highlightIncoming(i)))):(await this.$store.dispatch(`${this.moduleName}/initTime`),await this.$store.dispatch(`${this.moduleName}/getMessagesTail`)),this.to>Date.now()&&await this.$store.dispatch(`${this.moduleName}/pollingGetMessages`),this.updateRoute({query:{from:this.from/1e3,to:this.to/1e3}},!0),this.isInit=!0}},watch:{activeId(e){this.clear()},limit(e){this.currentLimit=e},$route(e){const t=1e3*e.query.from,i=1e3*e.query.to;t&&i&&(this.dateRange[0]!==t||this.dateRange[1]!==i)&&this.dateRangeChangeHandler([t,i])}},created(){this.debouncedGetMessagesPrev=p()(this.getMessagesPrev,2e3,{trailing:!1}),this.debouncedGetMessagesNext=p()(this.getMessagesNext,2e3,{trailing:!1}),this.init()},mounted(){this.resetParams()},updated(){this.messages.length?this.needAutoScroll&&this.$refs.scroller&&this.$refs.scroller.$el&&(this.$refs.scroller.$el.scrollTop=this.$refs.scroller.$el.scrollHeight):this.currentScrollTop=0},destroyed(){this.$store.dispatch(`${this.moduleName}/removePollingGetMessages`),this.$store.commit(`${this.moduleName}/clearMessages`),this.to=0,this.from=0},mixins:[q["a"],C["a"]],components:{MessagesListItem:f["a"],VirtualList:d.a,EmptyPane:w["a"],MessageSkeleton:$["a"],DateRangeModal:g["a"],ExportModal:y["a"]}},k=S,I=i("2877"),M=i("3980"),D=i("65c6"),N=i("9c40"),_=i("05c0"),H=i("6ac5"),P=i("eebe"),T=i.n(P),E=Object(I["a"])(k,r,l,!1,null,null,null),O=E.exports;T()(E,"components",{QResizeObserver:M["a"],QToolbar:D["a"],QBtn:N["a"],QTooltip:_["a"],QToolbarTitle:H["a"]});var V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper"},[i("q-resize-observer",{on:{resize:e.wrapperResizeHandler}}),i("div",[i("q-toolbar",{staticClass:"bg-grey-9"},[i("q-input",{staticClass:"full-width",attrs:{outlined:"","hide-bottom-space":"",rounded:"",dense:"",color:"white",dark:"",placeholder:"ident",debounce:500},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-icon",{attrs:{slot:"prepend",name:"mdi-magnify",color:"white"},slot:"prepend"})],1)],1),e.loadingFlag&&e.itemsCount>0?i("div",{staticClass:"absolute-bottom-right absolute-top-left",staticStyle:{overflow:"hidden",top:"50px"}},e._l(new Array(e.itemsCount).fill(""),(function(e,t){return i("device-skeleton",{key:t})})),1):!e.loadingFlag&&e.devicesByIndex.length?[i("VirtualList",{ref:"scroller",class:{"bg-grey-9":!0,"text-white":!0,"cursor-pointer":!0},style:{position:"absolute",top:"50px",bottom:0,right:0,left:0,height:"auto"},attrs:{size:e.itemHeight,remain:e.itemsCount,wclass:"q-w-list"}},e._l(e.devices,(function(t,s){return i("device-list-item",{key:t.ident,attrs:{item:t,index:s,itemHeight:e.itemHeight},on:{"item-click":e.deviceClickHandler},nativeOn:{mouseenter:function(i){return e.previewDeviceHandler(t)},mouseleave:function(i){return e.previewDeviceCloseHandler(t)}}})})),1)]:i("empty-pane",{attrs:{config:e.config.emptyState}})],2)],1)},L=[],Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-item",{staticClass:"q-py-none",attrs:{clickable:""},on:{click:function(t){e.itemClickHandler(e.index,e.item,t)}}},[i("q-item-section",[i("q-item-label",{staticClass:"ellipsis text-white q-pa-none",attrs:{header:""}},[e._v(e._s(e.ident))]),i("q-item-label",{staticClass:"ellipsis overflow-hidden text-grey-5",attrs:{caption:""}},[e._v(e._s(e.item.size?e.format.humanStorageSize(e.item.size):"new"))])],1)],1)},F=[],R=i("bd4c"),z=i("7937"),A={props:["item","index","itemHeight"],data(){return{date:R["a"],format:z["c"],ident:this.item.ident}},methods:{itemClickHandler(e,t,i){this.$emit("item-click",{index:e,content:t,event:i})}}},G=A,B=i("66e5"),j=i("4074"),J=i("0170"),W=Object(I["a"])(G,Q,F,!1,null,null,null),Y=W.exports;T()(W,"components",{QItem:B["a"],QItemSection:j["a"],QItemLabel:J["a"]});var K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-item",{staticClass:"bg-grey-9"},[i("q-item-section",[i("q-item-label",{staticClass:"q-pa-none bg-white full-width skeleton--modificator",staticStyle:{height:"16px"},attrs:{header:""}}),i("q-item-label",{staticClass:"bg-grey-6  full-width skeleton--modificator",staticStyle:{height:"15px"},attrs:{caption:""}})],1)],1)},U=[],Z=(i("29e0"),{}),X=Object(I["a"])(Z,K,U,!1,null,null,null),ee=X.exports;T()(X,"components",{QItem:B["a"],QItemSection:j["a"],QItemLabel:J["a"]});var te={props:["activeId","device","config","view"],data(){return{theme:this.config.theme,viewConfig:this.config.viewConfig,actions:this.config.actions,moduleName:this.config.vuexModuleName,itemHeight:48,itemsCount:0,wrapperHeight:0}},computed:{selectedChannel(){const e=this.$store.state.channels[this.activeId],t=this.$store.state.channelsProtocols[e.protocol_id].features;return e.features=t,e},devices:{get(){return this.$store.state[this.moduleName].devices},set(e){this.$store.commit(`${this.moduleName}/setDevices`,e)}},devicesByIndex(){return Object.values(this.$store.state[this.moduleName].devices)},filter:{get(){return this.$store.state[this.moduleName].deviceFilter},set(e){this.$store.commit(`${this.moduleName}/setDeviceFilter`,e),this.$store.dispatch(`${this.moduleName}/getDevices`).then((()=>{this.$nextTick((()=>{this.$refs.scroller&&this.$refs.scroller.forceRender()}))}))}},active:{get(){return this.$store.state[this.moduleName].active},async set(e){this.realtimeEnabled&&await this.$store.dispatch(`${this.moduleName}/removePollingGetDevices`),this.$store.commit(`${this.moduleName}/setActive`,e),this.$store.commit(`${this.moduleName}/clearDevices`),await this.$store.dispatch(`${this.moduleName}/getDevices`),this.selectedChannel.features.shared_connection||await this.$store.dispatch(`${this.moduleName}/pollingGetDevices`)}},realtimeEnabled(){return this.$store.state[this.moduleName].realtimeEnabled},loadingFlag(){const e=this.$store.state;return!(!e[this.config.vuexModuleName]||!e[this.config.vuexModuleName].isLoading)}},methods:{resetParams(){if(!this.$refs.wrapper)return!1;this.wrapperHeight=this.$refs.wrapper.offsetHeight-this.itemHeight,this.itemsCount=Math.ceil(this.wrapperHeight/this.itemHeight),this.$refs.scroller&&this.$refs.scroller.forceRender()},wrapperResizeHandler(){this.resetParams()},deviceClickHandler({index:e,content:t,event:i}){this.$store.commit(`${this.moduleName}/setIdent`,t.ident),this.$emit("change:device",t)},previewDeviceHandler(e){this.$emit("device:preview",e)},previewDeviceCloseHandler(e){this.$emit("device:preview-hide",e)},clearDevices(){this.devices={}}},watch:{activeId(e){this.active=e}},created(){const e=this.$route.query.filter;e&&this.$store.commit(`${this.moduleName}/setDeviceFilter`,e),this.activeId&&(this.active=this.activeId)},mounted(){this.resetParams()},beforeDestroy(){this.$store.dispatch(`${this.moduleName}/removePollingGetDevices`)},components:{VirtualList:d.a,DeviceListItem:Y,EmptyPane:w["a"],DeviceSkeleton:ee}},ie=te,se=i("27f9"),ae=i("0016"),ne=Object(I["a"])(ie,V,L,!1,null,null,null),oe=ne.exports;T()(ne,"components",{QResizeObserver:M["a"],QToolbar:D["a"],QInput:se["a"],QIcon:ae["a"]});var re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-timeline-entry",{staticClass:"hex-viewer__timeline-element",attrs:{side:2===e.message.type||130===e.message.type?"left":"right",color:e.eventsColors[e.message.type]+"-6"}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("div",{staticStyle:{"line-height":"18px"}},[i("span",[e._v(e._s(e.eventsDesc[e.message.type]))])]),i("div",{staticClass:"text-grey-5",staticStyle:{"font-size":".7rem"}},[e._v("\n      "+e._s(e.date.formatDate(1e3*e.message.timestamp,"DD/MM/YYYY HH:mm:ss.SSS (Z)"))+"\n      "),i("small",{staticClass:"rounded-borders q-mx-xs q-px-xs text-white",class:{"bg-blue":"tcp"===e.transport,"bg-pink-4":"udp"===e.transport,"bg-green-9":"http"===e.transport,"bg-purple-9":"mqtt"===e.transport}},[e._v(e._s(e.transport))])])]),i("div",{staticClass:"ellipsis",staticStyle:{"word-break":"break-all","font-size":".8rem",height:"1rem"}},[e._v(e._s(e.dataPreview))])])},le=[],ce=i("c423"),de={props:["message","view"],data(){return{date:R["a"],transports:{2:"tcp",3:"tcp",66:"http",67:"http",130:"udp",131:"udp",32:"mqtt",33:"mqtt",34:"mqtt",35:"mqtt",258:"custom",259:"custom"},eventsColors:{0:"green",32:"green",1:"red",33:"red",2:"purple",130:"purple",66:"purple",34:"purple",258:"purple",3:"yellow",67:"yellow",131:"yellow",35:"yellow",259:"yellow"},eventsDesc:{0:"Connect",32:"Connect",1:"Disconnect",33:"Disconnect",2:"Data received",130:"Data received",66:"Data received",34:"Data received",258:"Data received",3:"Data sent",67:"Data sent",131:"Data sent",35:"Data sent",259:"Data sent"},eventIcons:{0:"mdi-lan-connect",32:"mdi-lan-connect",1:"mdi-lan-disconnect",33:"mdi-lan-disconnect",2:"mdi-arrow-left-thick",130:"mdi-arrow-left-thick",66:"mdi-arrow-left-thick",34:"mdi-arrow-left-thick",258:"mdi-arrow-left-thick",3:"mdi-arrow-right-thick",67:"mdi-arrow-right-thick",35:"mdi-arrow-right-thick",131:"mdi-arrow-right-thick",259:"mdi-arrow-right-thick"}}},computed:{dataPreview(){let e=this.base64ToHex(this.message.data)||"";if("text"===this.view&&e){const t=e.match(/.{1,2}/g);e=t.map((e=>this.replaceByteWithMnemo(e))).join("")}return e},transport(){return this.transports[this.message.type]}},mixins:[ce["a"]]},he=de,me=(i("cb33"),i("74af")),ue=i("05eb"),pe=Object(I["a"])(he,re,le,!1,null,null,null),ge=pe.exports;T()(pe,"components",{QTimelineEntry:me["a"],QTimeline:ue["a"]});var ve=i("73bb"),fe=(i("26e9"),i("2b0e"));function we(e){const t=e||Date.now(),i=new Date(t).setHours(0,0,0,0),s=i+86399999.999;return{from:i,to:s}}async function $e({state:e,commit:t}){let i=Date.now();try{const s={data:{count:1,reverse:!0}},a=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,s);fe["default"].$logger.info("[trafficViewer]initTime"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:s}),i=m()(a,"data.result[0].timestamp",Math.floor(Date.now()/1e3)),i=Math.round(1e3*i)}catch(a){}const s=we(i);t("setFrom",s.from),t("setTo",s.to)}async function be({state:e,commit:t}){"undefined"!==typeof e.isLoading&&fe["default"].set(e,"isLoading",!0);try{const i=await fe["default"].connector.gw.getChannelsIdents(e.active,e.deviceFilter?`*${e.deviceFilter}*`:"*");t("reqStart",{endpoint:"getChannelsIdents",ids:e.active,ident:e.deviceFilter?`*${e.deviceFilter}*`:"*"});let s=m()(i,"data.result",[]);s=s.reduce(((e,{ident:t,size:i})=>(e[t]={ident:t,size:i},e)),{}),t("setDevices",s)}catch(i){t("reqFailed",i)}"undefined"!==typeof e.isLoading&&fe["default"].set(e,"isLoading",!1)}async function xe({state:e,commit:t}){"undefined"!==typeof e.isLoading&&fe["default"].set(e,"isLoading",!0);try{const i=Date.now(),s=e.to>i?i:e.to,a={data:{from:e.from/1e3,to:s/1e3,count:e.limit}},n=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,a);fe["default"].$logger.info("[trafficViewer]getMessages"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:a});const o=m()(n,"data.result",[]);t("setMessages",o)}catch(i){t("reqFailed",i)}"undefined"!==typeof e.isLoading&&fe["default"].set(e,"isLoading",!1)}async function ye({state:e,commit:t}){"undefined"!==typeof e.isLoading&&fe["default"].set(e,"isLoading",!0);try{const i=Date.now(),s=e.to>i?i:e.to,a={data:{count:e.limit,reverse:!0,from:e.from/1e3,to:s/1e3}},n=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,a);fe["default"].$logger.info("[trafficViewer]getMessagesTail"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:a});const o=m()(n,"data.result",[]);o.reverse(),t("setMessages",o)}catch(i){t("reqFailed",i)}"undefined"!==typeof e.isLoading&&fe["default"].set(e,"isLoading",!1)}let qe=!1;async function Ce({state:e,commit:t}){if(!e.messages.length||qe||e.messagePolling)return;qe=!0;let i=[];try{const s=e.messages[e.messages.length-1].timestamp+1e-6,a={data:{count:e.limit,from:s,to:e.to/1e3}},n=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,a);fe["default"].$logger.info("[trafficViewer]getMessagesNext"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:a}),i=m()(n,"data.result",[]),t("setMessagesAppend",i)}catch(s){t("reqFailed",s)}return qe=!1,i}async function Se({state:e,commit:t}){if(!e.messages.length||qe)return;qe=!0;let i=[];try{const s=e.messages[0].timestamp-1e-6,a={data:{count:e.limit,from:e.from/1e3,to:s,reverse:!0}},n=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,a);fe["default"].$logger.info("[trafficViewer]getMessagesPrev"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:a}),i=m()(n,"data.result",[]),i.reverse(),t("setMessagesPrepend",i)}catch(s){t("reqFailed",s)}return qe=!1,i}async function ke({state:e,commit:t}){await fe["default"].connector.socket.subscribe({name:`flespi/log/gw/channels/${e.active}/connections/+/identified`,handler:(t,i,s)=>{t=JSON.parse(t.toString());const a=t.ident;e.devices[a]||-1===a.indexOf(e.deviceFilter)||fe["default"].set(e.devices,a,{ident:a})}}),e.realtimeEnabled=!0,fe["default"].$logger.info("[trafficViewer]pollingGetDevices"),fe["default"].$logger.info(`[trafficViewer]subscribe: flespi/log/gw/channels/${e.active}/connections/+/identified`)}async function Ie({state:e,commit:t}){e.realtimeEnabled=!1,await fe["default"].connector.socket.unsubscribe(`flespi/log/gw/channels/${e.active}/connections/+/identified`),fe["default"].$logger.info("[trafficViewer]removePollingGetDevices"),fe["default"].$logger.info(`[trafficViewer]unsubscribe: flespi/log/gw/channels/${e.active}/connections/+/identified`)}let Me=0;function De({state:e,commit:t}){Me=setInterval((async()=>{try{const i=e.messages[e.messages.length-1].timestamp+1e-6,s=Math.ceil(Date.now()/1e3),a={data:{from:i,to:s}},n=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,a);fe["default"].$logger.info("[trafficViewer]pollingGetMessages"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:a});const o=m()(n,"data.result",[]);t("setMessagesAppend",o)}catch(i){t("reqFailed",i)}}),1e4),e.messagePolling=!0}function Ne({state:e,commit:t}){clearInterval(Me),Me=0,e.messagePolling=!1,fe["default"].$logger.info("[trafficViewer]removePollingGetMessages")}async function _e({state:e},t){let i=[];try{const s={data:{count:20,reverse:!0}},a=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,t.ident,s);fe["default"].$logger.info("[trafficViewer]getDevicePreview"),commit("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:t.ident,params:s}),i=m()(a,"data.result",[])}catch(s){commit("reqFailed",s)}return i}async function He({state:e,commit:t},{from:i,to:s}){let a=[];try{const n={data:{from:i,to:s}},o=await fe["default"].connector.gw.getChannelsIdentsPackets(e.active,e.ident,n);fe["default"].$logger.info("[trafficViewer]getExportData"),t("reqStart",{endpoint:"getChannelsIdentsPackets",ids:e.active,ident:e.ident,params:n}),a=m()(o,"data.result",[]),console.log(a)}catch(n){t("reqFailed",n)}return a}var Pe={initTime:$e,getMessages:xe,getMessagesTail:ye,getMessagesNext:Ce,getMessagesPrev:Se,getDevices:be,pollingGetDevices:ke,removePollingGetDevices:Ie,pollingGetMessages:De,removePollingGetMessages:Ne,getDevicePreview:_e,getExportData:He};function Te(e,t){e.limit=t}function Ee(e,t){e.active=t}function Oe(e){e.messages=[]}function Ve(e){e.devices=[]}function Le(e,t){e.devices=t}function Qe(e,t){e.messages=t}function Fe(e,t){t.length&&e.messages.splice(e.messages.length,0,...t)}function Re(e,t){t.length&&e.messages.splice(0,0,...t)}function ze(e,t){e.to=t}function Ae(e,t){e.from=t}function Ge(e,t){e.deviceFilter=t}function Be(e,t){e.ident=t}function je(e){e.devices={},e.messages=[],e.to=0,e.from=0,e.active=null,e.ident=null}function Je(e,t){fe["default"].$logger.info(`[trafficViewer]reqStart: ${JSON.stringify(t)}`)}function We(e,t){fe["default"].$logger.info(`[trafficViewer]reqFailed: ${JSON.stringify(t)}`)}var Ye={setLimit:Te,setActive:Ee,clearMessages:Oe,clearDevices:Ve,setDevices:Le,setMessages:Qe,setMessagesAppend:Fe,setMessagesPrepend:Re,clean:je,setTo:ze,setFrom:Ae,setDeviceFilter:Ge,setIdent:Be,reqFailed:We,reqStart:Je};const Ke={devices:{},messages:[],active:null,ident:null,limit:0,deviceFilter:"",from:0,to:0,isLoading:!1,realtimeEnabled:!1,messagePolling:!1};var Ue={namespaced:!0,state:Ke,actions:Pe,mutations:Ye},Ze=i("798f"),Xe={props:["active","activeDevice","isVisibleToolbar","config","deviceCloseble"],data(){return{devicePreview:null,typeOfHexView:"hex",limit:1e3,selectedMessages:"",moduleName:this.config.messages.vuexModuleName,devicePreviewMessages:[]}},computed:{hex(){return!(!this.selectedMessages||!this.activeDevice)&&this.selectedMessages.reduce(((e,t)=>(e+=this.base64ToHex(t.data)||"",e)),"")}},methods:{async previewShow(e){this.devicePreview=e,this.devicePreviewMessages=await this.$store.dispatch(`${this.moduleName}/getDevicePreview`,e)},previewHide(e){this.devicePreview=null},getContentBySelected(e){return this.selectedMessages.reduce(((t,i)=>(t+=this.getHeader(i),t+="\r\n",i.data&&(t+=this.getContent(e,this.base64ToHex(i.data),this.typeOfHexView)),t+="\r\n",t)),"")},copySelected(e="view"){const t=this.getContentBySelected(e);this.copy(t,e)},exportSelected(e="view"){const t=this.getContentBySelected(e);this.exportData(t,e)}},created(){this.$store.state[this.moduleName]||this.$store.registerModule(this.moduleName,Ue)},destroyed(){this.$store.commit(`${this.moduleName}/clean`),this.$store.unregisterModule(this.moduleName)},watch:{active(){this.selectedMessages="",this.devicePreview=null}},mixins:[Ze["a"]],components:{Devices:oe,Messages:O,MessagePreviewItem:ge,PacketView:ve["a"]}},et=Xe,tt=i("4e73"),it=i("1c1c"),st=i("eb85"),at=i("7f67"),nt=Object(I["a"])(et,n,o,!1,null,null,null),ot=nt.exports;T()(nt,"components",{QToolbar:D["a"],QIcon:ae["a"],QToolbarTitle:H["a"],QBtn:N["a"],QTooltip:_["a"],QMenu:tt["a"],QList:it["a"],QSeparator:st["a"],QItem:B["a"],QItemSection:j["a"],QTimeline:ue["a"]}),T()(nt,"directives",{ClosePopup:at["a"]});var rt=i("a99a"),lt=i("2f62"),ct=i("286e"),dt={name:"PageTrafficViewer",props:["limit","isLoading","isVisibleToolbar","isNeedSelect","config","settings"],mixins:[ct["a"]],data(){return{active:null,activeDevice:null,relatedDeviceId:null,isInit:!1,isItemsInit:!1,isItemsInitStart:!1,filter:"",prevEntity:null,prevRoute:null,isIntegration:this.$q.platform.within.iframe}},computed:{...Object(lt["d"])({tokenType(e){return e.tokenInfo&&e.tokenInfo.access?e.tokenInfo.access.type:-1},items(e){return Object.values(e.channels||{}).filter((t=>e.channelsProtocols[t.protocol_id].features.raw_packets))}}),filteredItems(){const e=this.filter.toLowerCase(),t=this.filter?this.items.filter((t=>t&&"undefined"!==typeof t.name&&null!==t.name&&t.name.toLowerCase().indexOf(e)>=0||t&&"undefined"!==typeof t.id&&null!==t.id&&(t.id+"").indexOf(e)>=0)):this.items;return t.sort(((e,t)=>{if(!e.name)return-1;if(!t.name)return 1;const i=e.name.toLowerCase(),s=t.name.toLowerCase();return i<s?-1:1})),t},selectedItem(){return this.items.filter((e=>e.id===this.active))[0]||null},needShowBackToChannel(){return this.active&&(!this.isIntegration||this.isIntegration&&("channels"===this.prevEntity&&!this.isNeedSelect||this.isNeedSelect&&!("string"===typeof this.isNeedSelect&&this.isNeedSelect.indexOf("channels")>-1)))},needShowBackToDevice(){return this.active&&this.activeDevice&&this.relatedDeviceId&&(!this.isIntegration||this.isIntegration&&("devices"===this.prevEntity&&!this.isNeedSelect||this.isNeedSelect))}},methods:{changeActiveDeviceHandler(e){this.setActiveDevice(e),this.active?this.activeDevice?this.$router.push(`/tools/traffic/${this.active}/ident/${e.ident}`).catch((e=>e)):this.$router.push(`/tools/traffic/${this.active}`).catch((e=>e)):this.$router.push("/tools/traffic").catch((e=>e))},unselect(){this.$refs.messages.unselect()},viewLogsHandler(){"channels"===this.prevEntity&&this.prevRoute&&this.prevRoute.params.id===this.active?this.$router.push(this.prevRoute).catch((e=>e)):this.$router.push(`/channels/${this.active}`).catch((e=>e))},setActiveDevice(e){this.activeDevice=e,this.getRelatedDeviceId()},getRelatedDeviceId(){this.activeDevice?this.$connector.gw.getChannelProtocolsDeviceTypes(this.selectedItem.protocol_id,"all",{fields:"id"}).then((e=>{const t=m()(e,"data.result",[]);return t.map((e=>e.id))})).then((e=>{this.$connector.gw.getDevices(`configuration.ident=${this.activeDevice.ident}`,{fields:"id,device_type_id"}).then((t=>{const i=m()(t,"data.result",[]),s=i.reduce(((t,i)=>t||(e.includes(i.device_type_id)?i.id:t)),0);this.relatedDeviceId=s}))})):this.relatedDeviceId=null},goToDevice(){"devices"===this.prevEntity&&this.prevRoute&&this.prevRoute.params.id===this.relatedDeviceId?this.$router.push(this.prevRoute).catch((e=>e)):this.$router.push(`/devices/${this.relatedDeviceId}`).catch((e=>e))},init(){const e="tools/traffic",t=m()(this.settings,`entities[${e}]`,void 0);this.isInit=!0,this.$route.params&&this.$route.params.id?this.items.filter((e=>e.id===Number(this.$route.params.id))).length?(this.active=Number(this.$route.params.id),this.$route.params.ident&&this.setActiveDevice({ident:this.$route.params.ident})):this.active=null:t&&this.items.filter((e=>e.id===t)).length&&(this.active=t),this.$emit("inited")}},beforeRouteEnter(e,t,i){i((e=>{e.prevRoute=t,e.prevEntity=t.meta.moduleName}))},watch:{$route(e){e.params&&e.params.id?this.items.filter((t=>t.id===Number(e.params.id))).length?(this.active=Number(e.params.id),this.$route.params.ident&&this.setActiveDevice({ident:this.$route.params.ident})):this.isInit&&(this.active=null):e.params&&!e.params.id&&(this.active=null)},active(e){const t=this.items.filter((t=>t.id===e))[0]||{};e&&this.$emit("update:settings",{type:"ENTITY_CHANGE",opt:{entity:"tools/traffic"},value:t.id})}},components:{TrafficViewer:ot,EntitiesToolbar:rt["a"]}},ht=dt,mt=(i("8b7b"),i("9989")),ut=i("ddd8"),pt=i("8572"),gt=Object(I["a"])(ht,s,a,!1,null,null,null);t["default"]=gt.exports;T()(gt,"components",{QPage:mt["a"],QSelect:ut["a"],QInput:se["a"],QIcon:ae["a"],QItem:B["a"],QItemSection:j["a"],QItemLabel:J["a"],QBtn:N["a"],QField:pt["a"]})},2510:function(e,t,i){},"29e0":function(e,t,i){"use strict";i("69d5b")},"69d5b":function(e,t,i){},"8b7b":function(e,t,i){"use strict";i("2510")},cb33:function(e,t,i){"use strict";i("efe3")},efe3:function(e,t,i){}}]);